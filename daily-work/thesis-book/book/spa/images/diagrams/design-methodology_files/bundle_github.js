(function(a){a.fn.autoSuggest=function(d,b){var c={startText:"Enter Name Here",selectedItem:"value",searchObj:"value",queryParam:"q",retrieveLimit:false,extraParams:"",matchCase:false,minChars:1,keyDelay:400,start:function(){},selectionClick:function(){},formatList:false,retrieveComplete:function(l){return l},resultsComplete:function(){}},e=a.extend(c,b),f="object",g=0;if(typeof d=="string"){f="string";var h=d}else{var i=d;for(k in d)d.hasOwnProperty(k)&&g++}if(f=="object"&&g>0||f=="string")return this.each(function(l){l=
l+""+Math.floor(Math.random()*100);e.start.call(this);var j=a(this);j.attr("autocomplete","off").addClass("as-input").attr("id","as-input-"+l).val(e.startText);var o=false;j.wrap('<ul class="as-selections" id="as-selections-'+l+'"></ul>').wrap('<li class="as-original" id="as-original-'+l+'"></li>');var n=a("#as-selections-"+l),p=a("#as-original-"+l),s=a('<div class="as-results" id="as-results-'+l+'"></div>').hide(),v=a('<ul class="as-list"></ul>'),y=a('<input type="hidden" class="as-values" name="as_values_'+
l+'" />');j.after(y);n.click(function(){o=true;j.focus()}).mousedown(function(){o=false}).after(s);a("li",v).live("mouseover",function(){a("li",v).removeClass("active");a(this).addClass("active")});var x=null,C="";j.focus(function(){if(a(this).val()==e.startText&&y.val()=="")a(this).val("");else if(o){a("li.as-selection-item",n).removeClass("blur");a(this).val()!=""&&s.show()}return o=true}).blur(function(){if(a(this).val()==""&&y.val()=="")a(this).val(e.startText);else if(o){a("li.as-selection-item",
n).addClass("blur").removeClass("selected");s.hide()}}).keydown(function(u){lastKeyPressCode=u.keyCode;first_focus=false;switch(u.keyCode){case 38:u.preventDefault();D("up");break;case 40:u.preventDefault();D("down");break;case 8:if(j.val()==""){u=y.val().split(",");u=u[u.length-2];n.children().not(p.prev()).removeClass("selected");if(p.prev().hasClass("selected")){y.val(y.val().replace(u+",",""));p.prev().remove()}else p.prev().addClass("selected")}if(j.val().length==1){s.hide();C=""}if(a(":visible",
s).length>0){x&&clearTimeout(x);x=setTimeout(function(){q()},e.keyDelay)}break;case 9:case 13:var m=a("li.active:first",s);if(m.length>0){m.click();s.hide();u.preventDefault()}break;default:x&&clearTimeout(x);x=setTimeout(function(){q()},e.keyDelay);break}});function q(){if(lastKeyPressCode==46||lastKeyPressCode>8&&lastKeyPressCode<32)return s.hide();var u=j.val().replace(/[\\]+|[\/]+/g,"");if(u!=C){C=u;if(u.length>=e.minChars){n.addClass("loading");if(f=="string"){var m="";if(e.retrieveLimit)m="&limit="+
encodeURIComponent(e.retrieveLimit);a.getJSON(h+"?"+e.queryParam+"="+encodeURIComponent(u)+m+e.extraParams,function(r){g=0;r=e.retrieveComplete.call(this,r);for(k in r)r.hasOwnProperty(k)&&g++;w(r,u)})}else w(i,u)}else{n.removeClass("loading");s.hide()}}}function w(u,m){e.matchCase||(m=m.toLowerCase());var r=0;s.html(v.html("")).hide();for(var z=0;z<g;z++){var t=z,B=false;if(e.searchObj=="value")var A=u[t].value;else{A="";for(var E=e.searchObj.split(","),H=0;H<E.length;H++){var J=a.trim(E[H]);A=A+
u[t][J]+" "}}if(A){e.matchCase||(A=A.toLowerCase());if(A.search(m)!=-1&&y.val().search(u[t].value+",")==-1)B=true}if(B){B=a('<li class="as-result-item" id="as-result-item-'+t+'"></li>').click(function(){var F=a(this).data("data"),G=F.num;if(a("#as-selection-"+G,n).length<=0){F=F.attributes;j.val("").focus();C="";y.val(y.val()+F.value+",");var I=a('<li class="as-selection-item" id="as-selection-'+G+'"></li>').click(function(){e.selectionClick.call(this,a(this));n.children().removeClass("selected");
a(this).addClass("selected")}).mousedown(function(){o=false});G=a('<a class="as-close">&times;</a>').click(function(){y.val(y.val().replace(F.value+",",""));I.remove();j.focus();return false});p.before(I.html(F[e.selectedItem]).prepend(G));s.hide()}}).mousedown(function(){o=false}).data("data",{attributes:u[t],num:t});t=a.extend({},u[t]);A=e.matchCase?new RegExp("(?![^&;]+;)(?!<[^<>]*)("+m+")(?![^<>]*>)(?![^&;]+;)","g"):new RegExp("(?![^&;]+;)(?!<[^<>]*)("+m+")(?![^<>]*>)(?![^&;]+;)","gi");t[e.selectedItem]=
t[e.selectedItem].replace(A,"<em>$1</em>");B=e.formatList?e.formatList.call(this,t,B):B.html(t[e.selectedItem]);v.append(B);delete t;r++}}n.removeClass("loading");r<=0&&v.html('<li class="as-message">No Results Found</li>');v.css("width",n.outerWidth());s.show();e.resultsComplete.call(this)}function D(u){if(a(":visible",s).length>0){var m=a("li",s),r=u=="down"?m.eq(0):m.filter(":last"),z=a("li.active:first",s);if(z.length>0)r=u=="down"?z.next():z.prev();m.removeClass("active");r.addClass("active")}}
})}})(jQuery);(function(a){a.fn.extend({autocomplete:function(d,b){var c=typeof d=="string";b=a.extend({},a.Autocompleter.defaults,{url:c?d:null,data:c?null:d,delay:c?a.Autocompleter.defaults.delay:10,max:b&&!b.scroll?10:150},b);b.highlight=b.highlight||function(e){return e};return this.each(function(){new a.Autocompleter(this,b)})},result:function(d){return this.bind("result",d)},search:function(d){return this.trigger("search",[d])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(d){return this.trigger("setOptions",
[d])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(d,b){var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34},e=a(d).attr("autocomplete","off").addClass(b.inputClass),f,g="",h=a.Autocompleter.Cache(b),i=0,l,j={mouseDownOnSelect:false},o=a.Autocompleter.Select(b,d,n,j);e.keydown(function(m){l=m.keyCode;switch(m.keyCode){case c.UP:m.preventDefault();o.visible()?o.prev():p(0,true);break;case c.DOWN:m.preventDefault();o.visible()?
o.next():p(0,true);break;case c.PAGEUP:m.preventDefault();o.visible()?o.pageUp():p(0,true);break;case c.PAGEDOWN:m.preventDefault();o.visible()?o.pageDown():p(0,true);break;case b.multiple&&a.trim(b.multipleSeparator)==","&&c.COMMA:case c.TAB:case c.RETURN:n()&&m.preventDefault();break;case c.ESC:o.hide();break;default:clearTimeout(f);f=setTimeout(p,b.delay);break}}).keypress(function(){}).focus(function(){i++}).blur(function(){i=0;j.mouseDownOnSelect||x()}).click(function(){i++>1&&!o.visible()&&
p(0,true)}).bind("search",function(){var m=arguments.length>1?arguments[1]:null;function r(z,t){var B;if(t&&t.length)for(var A=0;A<t.length;A++)if(t[A].result.toLowerCase()==z.toLowerCase()){B=t[A];break}typeof m=="function"?m(B):e.trigger("result",B&&[B.data,B.value])}a.each(s(e.val()),function(z,t){w(t,r,r)})}).bind("flushCache",function(){h.flush()}).bind("setOptions",function(m,r){a.extend(b,r);"data"in r&&h.populate()}).bind("unautocomplete",function(){o.unbind();e.unbind()});function n(){var m=
o.selected();if(!m)return false;var r=m.result;g=r;if(b.multiple){var z=s(e.val());if(z.length>1)r=z.slice(0,z.length-1).join(b.multipleSeparator)+b.multipleSeparator+r;r+=b.multipleSeparator}e.val(r);C();e.trigger("result",[m.data,m.value]);return true}function p(m,r){if(l==c.DEL)o.hide();else{m=e.val();if(!(!r&&m==g)){g=m;m=v(m);if(m.length>=b.minChars){e.addClass(b.loadingClass);b.matchCase||(m=m.toLowerCase());w(m,q,C)}else{u();o.hide()}}}}function s(m){if(!m)return[""];m=m.split(a.trim(b.multipleSeparator));
var r=[];a.each(m,function(z,t){if(a.trim(t))r[z]=a.trim(t)});return r}function v(m){if(!b.multiple)return m;m=s(m);return m[m.length-1]}function y(m,r){if(b.autoFill&&v(e.val()).toLowerCase()==m.toLowerCase()&&l!=8){e.val(e.val()+r.substring(v(g).length));a.Autocompleter.Selection(d,g.length,g.length+r.length)}}function x(){clearTimeout(f);f=setTimeout(C,200)}function C(){o.hide();clearTimeout(f);u();b.mustMatch&&e.search(function(m){m||e.val("")})}function q(m,r){if(r&&r.length&&i){u();o.display(r,
m);y(m,r[0].value);o.show()}else C()}function w(m,r,z){b.matchCase||(m=m.toLowerCase());var t=h.load(m);if(t&&t.length)r(m,t);else if(typeof b.url=="string"&&b.url.length>0){if(b.ajaxing)return null;b.ajaxing=true;var B={};a.each(b.extraParams,function(A,E){B[A]=typeof E=="function"?E():E});a.ajax({mode:"abort",port:"autocomplete"+d.name,dataType:b.dataType,url:b.url,data:a.extend({q:v(m),limit:b.max},B),success:function(A){A=b.parse&&b.parse(A)||D(A);h.add(m,A);b.ajaxing=false;r(m,A)}})}else z(m)}
function D(m){var r=[];m=m.split("\n");for(var z=0;z<m.length;z++){var t=a.trim(m[z]);if(t){t=t.split("|");r[r.length]={data:t,value:t[0],result:b.formatResult&&b.formatResult(t,t[0])||t[0]}}}return r}function u(){e.removeClass(b.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(d){return d[0]},
autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(d,b){return d.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180,attachTo:"body"};a.Autocompleter.Cache=function(d){var b={},c=0;function e(i,l){d.matchCase||(i=i.toLowerCase());i=i.indexOf(l);if(i==-1)return false;return i==0||d.matchContains}function f(i,l){c>d.cacheLength&&h();b[i]||
c++;b[i]=l}function g(){if(!d.data)return false;var i={},l=0;if(!d.url)d.cacheLength=1;i[""]=[];for(var j=0,o=d.data.length;j<o;j++){var n=d.data[j];n=typeof n=="string"?[n]:n;var p=d.formatItem(n,j+1,d.data.length);if(p!==false){var s=p.charAt(0).toLowerCase();i[s]||(i[s]=[]);n={value:p,data:n,result:d.formatResult&&d.formatResult(n)||p};i[s].push(n);l++<d.max&&i[""].push(n)}}a.each(i,function(v,y){d.cacheLength++;f(v,y)})}setTimeout(g,25);function h(){b={};c=0}return{flush:h,add:f,populate:g,load:function(i){if(!d.cacheLength||
!c)return null;if(!d.url&&d.matchContains){var l=[];for(var j in b)if(j.length>0){var o=b[j];a.each(o,function(n,p){e(p.value,i)&&l.push(p)})}return l}else if(b[i])return b[i];else if(d.matchSubset)for(j=i.length-1;j>=d.minChars;j--)if(o=b[i.substr(0,j)]){l=[];a.each(o,function(n,p){if(e(p.value,i))l[l.length]=p});return l}return null}}};a.Autocompleter.Select=function(d,b,c,e){var f={ACTIVE:"ac_over"},g,h=-1,i,l="",j=true,o,n;function p(){if(j){o=a("<div/>").hide().addClass(d.resultsClass).css("position",
"absolute").appendTo(d.attachTo);n=a("<ul>").appendTo(o).mouseover(function(q){if(s(q).nodeName&&s(q).nodeName.toUpperCase()=="LI"){h=a("li",n).removeClass(f.ACTIVE).index(s(q));a(s(q)).addClass(f.ACTIVE)}}).click(function(q){a(s(q)).addClass(f.ACTIVE);c();b.focus();return false}).mousedown(function(){e.mouseDownOnSelect=true}).mouseup(function(){e.mouseDownOnSelect=false});d.width>0&&o.css("width",d.width);j=false}}function s(q){for(q=q.target;q&&q.tagName!="LI";)q=q.parentNode;if(!q)return[];return q}
function v(q){g.slice(h,h+1).removeClass();y(q);q=g.slice(h,h+1).addClass(f.ACTIVE);if(d.scroll){var w=0;g.slice(0,h).each(function(){w+=this.offsetHeight});if(w+q[0].offsetHeight-n.scrollTop()>n[0].clientHeight)n.scrollTop(w+q[0].offsetHeight-n.innerHeight());else w<n.scrollTop()&&n.scrollTop(w)}}function y(q){h+=q;if(h<0)h=g.size()-1;else if(h>=g.size())h=0}function x(q){return d.max&&d.max<q?d.max:q}function C(){n.empty();for(var q=x(i.length),w=0;w<q;w++)if(i[w]){var D=d.formatItem(i[w].data,
w+1,q,i[w].value,l);if(D!==false){D=a("<li>").html(d.highlight(D,l)).addClass(w%2==0?"ac_even":"ac_odd").appendTo(n)[0];a.data(D,"ac_data",i[w])}}g=n.find("li");if(d.selectFirst){g.slice(0,1).addClass(f.ACTIVE);h=0}n.bgiframe()}return{display:function(q,w){p();i=q;l=w;C()},next:function(){v(1)},prev:function(){v(-1)},pageUp:function(){h!=0&&h-8<0?v(-h):v(-8)},pageDown:function(){h!=g.size()-1&&h+8>g.size()?v(g.size()-1-h):v(8)},hide:function(){o&&o.hide();h=-1},visible:function(){return o&&o.is(":visible")},
current:function(){return this.visible()&&(g.filter("."+f.ACTIVE)[0]||d.selectFirst&&g[0])},show:function(){var q=a(b).offset();o.css({width:typeof d.width=="string"||d.width>0?d.width:a(b).width(),top:q.top+b.offsetHeight,left:q.left}).show();if(d.scroll){n.scrollTop(0);n.css({maxHeight:d.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var w=0;g.each(function(){w+=this.offsetHeight});q=w>d.scrollHeight;n.css("height",q?d.scrollHeight:w);q||g.width(n.width()-
parseInt(g.css("padding-left"))-parseInt(g.css("padding-right")))}}},selected:function(){var q=g&&g.filter("."+f.ACTIVE).removeClass(f.ACTIVE);return q&&q.length&&a.data(q[0],"ac_data")},unbind:function(){o&&o.remove()}}};a.Autocompleter.Selection=function(d,b,c){if(d.createTextRange){var e=d.createTextRange();e.collapse(true);e.moveStart("character",b);e.moveEnd("character",c);e.select()}else if(d.setSelectionRange)d.setSelectionRange(b,c);else if(d.selectionStart){d.selectionStart=b;d.selectionEnd=
c}d.focus()}})(jQuery);(function(a){a.fn.autosaveField=function(d){var b=a.extend({},a.fn.autosaveField.defaults,d);return this.each(function(){var c=a(this),e=c.find(":text"),f=c.find(".error"),g=c.find(".success"),h=c.attr("data-action"),i=c.attr("data-name"),l=e.val();function j(){e.spin();a.ajax({url:h,type:"POST",data:{_method:b.method,field:i,value:e.val()},success:function(){e.stopSpin();g.show();l=e.val()},error:function(){e.stopSpin();f.show()}})}e.blur(function(){a(this).val()!=l&&j()});e.keyup(function(){f.hide();
g.hide()})})};a.fn.autosaveField.defaults={method:"put"}})(jQuery);(function(a){a.fn.bgIframe=a.fn.bgiframe=function(d){if(a.browser.msie&&/6.0/.test(navigator.userAgent)){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},d||{});var b=function(e){return e&&e.constructor==Number?e+"px":e},c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(d.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(d.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
b(d.top))+";left:"+(d.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+(d.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+(d.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){a("> iframe.bgiframe",this).length==0&&this.insertBefore(document.createElement(c),this.firstChild)})}return this}})(jQuery);(function(a){a.dimensions={version:"@VERSION"};a.each(["Height","Width"],function(b,c){a.fn["inner"+c]=function(){if(this[0]){var e=c=="Height"?"Top":"Left",f=c=="Height"?"Bottom":"Right";return this.css("display")!="none"?this[0]["client"+c]:d(this,c.toLowerCase())+d(this,"padding"+e)+d(this,"padding"+f)}};a.fn["outer"+c]=function(e){if(this[0]){var f=c=="Height"?"Top":"Left",g=c=="Height"?"Bottom":"Right";e=a.extend({margin:false},e||{});var h=this.css("display")!="none"?this[0]["offset"+c]:d(this,
c.toLowerCase())+d(this,"border"+f+"Width")+d(this,"border"+g+"Width")+d(this,"padding"+f)+d(this,"padding"+g);return h+(e.margin?d(this,"margin"+f)+d(this,"margin"+g):0)}}});a.each(["Left","Top"],function(b,c){a.fn["scroll"+c]=function(e){if(this[0])return e!=undefined?this.each(function(){this==window||this==document?window.scrollTo(c=="Left"?e:a(window).scrollLeft(),c=="Top"?e:a(window).scrollTop()):(this["scroll"+c]=e)}):this[0]==window||this[0]==document?self[c=="Left"?"pageXOffset":"pageYOffset"]||
a.boxModel&&document.documentElement["scroll"+c]||document.body["scroll"+c]:this[0]["scroll"+c]}});a.fn.extend({position:function(){var b=this[0],c,e,f;if(b){f=this.offsetParent();c=this.offset();e=f.offset();c.top-=d(b,"marginTop");c.left-=d(b,"marginLeft");e.top+=d(f,"borderTopWidth");e.left+=d(f,"borderLeftWidth");c={top:c.top-e.top,left:c.left-e.left}}return c},offsetParent:function(){for(var b=this[0].offsetParent;b&&!/^body|html$/i.test(b.tagName)&&a.css(b,"position")=="static";)b=b.offsetParent;
return a(b)}});function d(b,c){return parseInt(a.curCSS(b.jquery?b[0]:b,c,true))||0}})(jQuery);(function(a){a.fn.gfmPreview=function(d){d=d||{};var b=a("<div>").attr("class","gfm-preview").text("Preview goes here"),c=this;c.after(b);var e=false;c.keyup(function(){e=true});setInterval(function(){if(e){e=false;var f=c.val();a.post("/preview",{text:f},function(g){b.html(g)})}},2000)}})(jQuery);
(function(a){a.fn.gfmPreview=function(d){var b=a.extend({},a.fn.gfmPreview.defaults,d);return this.each(function(){var c=false,e=a(this),f=a("<div>").attr("class","gfm-preview").text("Preview goes here"),g=b.outputContainer||f;b.outputContainer==null&&e.after(f);var h=false;e.keyup(function(){h=true;if(!c){b.onInit.call(this);c=true}});setInterval(function(){if(h){h=false;var i=e.val();a.post("/preview",{text:i},function(l){g.html(l)})}},b.refresh)})};a.fn.gfmPreview.defaults={outputContainer:null,
refresh:2000,onInit:function(){}}})(jQuery);(function(a){a.fn.cardsSelect=function(d){a.extend({},a.fn.cardsSelect.defaults,d);return this.each(function(){var b=a(this),c=b.next("dl.form").find("input[type=text]"),e=b.find(".card"),f=b.find("input[name='billing[type]']");function g(h){e.each(function(){var i=a(this);i.attr("data-name")==h?i.removeClass("disabled"):i.addClass("disabled");f.val(h)})}c.keyup(function(){var h=a(this).val();if(h.match(/^5[1-5]/))g("master");else if(h.match(/^4/))g("visa");else if(h.match(/^3(4|7)/))g("american_express");
else if(h.match(/^6011/))g("discover");else if(h.match(/^(3|2131|1800)/))g("jcb");else if(h.match(/^(30[0-5]|36|38)/))g("diners");else{e.removeClass("disabled");f.val("")}}).keyup()})};a.fn.cardsSelect.defaults={}})(jQuery);(function(a){a.fn.enticeToRegister=function(d){a.extend({},a.fn.enticeToRegister.defaults,d);return this.each(function(){var b=a(this);b.addClass("entice");b.attr("title","You must be logged in to use this feature");b.tipsy();this.onclick=function(){return false}})};a.fn.enticeToRegister.defaults={}})(jQuery);(function(a){a.fn.errorify=function(d,b){a.extend({},a.fn.errorify.defaults,b);return this.each(function(){var c=a(this);c.addClass("error");c.find("p.note").hide();c.find("dd.error").remove();var e=a("<dd>").addClass("error").text(d);c.append(e)})};a.fn.errorify.defaults={};a.fn.unErrorify=function(d){a.extend({},a.fn.unErrorify.defaults,d);return this.each(function(){var b=a(this);b.removeClass("error");b.find("p.note").show();b.find("dd.error").remove()})};a.fn.unErrorify.defaults={}})(jQuery);(function(a){a.fn.redirector=function(d){var b=a.extend({},a.fn.redirector.defaults,d);this.length!=0&&a.smartPoller(b.time,function(c){a.getJSON(b.url,function(e){if(e)c();else window.location=b.to})})};a.fn.redirector.defaults={time:100,url:null,to:"/"}})(jQuery);(function(a){a.fn.repoInlineEdit=function(d){var b=a.extend({},a.fn.repoInlineEdit.defaults,d);return this.each(function(){var c=a(this),e=a("#"+c.attr("rel"));function f(){if(a.trim(c.text())=="")b.is_owner?c.html(a("#pl-"+b.name).html()):c.remove();else b.is_owner&&c.find("p:last-child").append(' <em class="placeholder edit-text">click to edit</em>')}f();if(b.is_owner){c.addClass("editable-text");c.click(function(g){if(!a(g.target).is("a")){c.hide();e.show().find("input").focus()}});e.find(".cancel").click(function(){c.show();
e.hide();return false});e.find("form").submit(function(){a.fn.repoInlineEdit.load();e.css({opacity:0.4});var g=a(this),h=g.serialize();a.post(g.attr("action"),h,function(i,l){if(l=="success"){if(b.name=="homepage"){l=i.match(/^https?:/)?i:"http://"+i;c.html(a('<a rel="nofollow"/>').attr("href",l).text(i))}else c.html(a.simpleFormat(i));f();e.hide();c.show();a.fn.repoInlineEdit.endLoad()}e.css({opacity:1})});return false})}})};a.fn.repoInlineEdit.defaults={is_owner:false,name:"description"};a.fn.repoInlineEdit.load=
function(){a("#repo_details_loader").show()};a.fn.repoInlineEdit.endLoad=function(){a("#repo_details_loader").hide()};a.simpleFormat=function(d){d=a("<div>").text(d).html();d=d.replace(/\r\n?/,"\n");d=d.replace(/\n\n+/,"</p>\n\n<p>");d=d.replace(/([^\n]\n)(?=[^\n])/,"<br />");return"<p>"+d+"</p>"}})(jQuery);(function(a){a.fn.repoList=function(d){var b=a.extend({},a.fn.repoList.defaults,d);return this.each(function(){var c=a(this),e=c.find(".repo_list"),f=c.find(".show-more"),g=c.find(".filter_input").val(""),h=g.val(),i=f.length==0?true:false,l=null,j=false;g[0]&&typeof g[0].onsearch=="object"&&g.addClass("native");f.click(function(){if(j)return false;var p=f.spin();j=true;a(b.selector).load(b.ajaxUrl,function(){i=true;p.parents(".repos").find(".filter_selected").click();p.stopSpin()});p.hide();return false});
function o(){var p=e.find("li");if(l){p.hide();e.find("li."+l).show()}else p.show();g.val()!=""&&p.filter(":not(:Contains('"+g.val()+"'))").hide()}c.find(".repo_filter").click(function(){var p=a(this);c.find(".repo_filterer a").removeClass("filter_selected");p.addClass("filter_selected");l=p.attr("rel");i?o():f.click();return false});function n(){g.val()==""?g.addClass("placeholder"):g.removeClass("placeholder")}g.bind("keyup blur click",function(){if(this.value!=h){h=this.value;i?o():f.click();n()}});
n()})};a.fn.repoList.defaults={selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"}})(jQuery);(function(a){a.fn.editable=function(d,b){var c={target:d,name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",submittype:"post",loaddata:{},submitdata:{}};b&&a.extend(c,b);var e=a.editable.types[c.type].plugin||function(){},f=a.editable.types[c.type].submit||function(){},g=a.editable.types[c.type].buttons||a.editable.types.defaults.buttons,h=a.editable.types[c.type].content||a.editable.types.defaults.content,
i=a.editable.types[c.type].element||a.editable.types.defaults.element,l=c.callback||function(){};a.isFunction(a(this)[c.event])||(a.fn[c.event]=function(j){return j?this.bind(c.event,j):this.trigger(c.event)});a(this).attr("title",c.tooltip);c.autowidth="auto"==c.width;c.autoheight="auto"==c.height;return this.each(function(){a.trim(a(this).html())||a(this).html(c.placeholder);a(this)[c.event](function(){var j=this;if(!j.editing){function o(){a(j).html(j.revert);j.editing=false;a.trim(a(j).html())||
a(j).html(c.placeholder)}a(j).css("visibility","hidden");if(c.width!="none")c.width=c.autowidth?a(j).width():c.width;if(c.height!="none")c.height=c.autoheight?a(j).height():c.height;a(this).css("visibility","");a(this).html().toLowerCase().replace(/;/,"")==c.placeholder.toLowerCase().replace(/;/,"")&&a(this).html("");j.editing=true;j.revert=a(j).html();a(j).html("");var n=a("<form/>");if(c.cssclass)"inherit"==c.cssclass?n.attr("class",a(j).attr("class")):n.attr("class",c.cssclass);if(c.style)if("inherit"==
c.style){n.attr("style",a(j).attr("style"));n.css("display",a(j).css("display"))}else n.attr("style",c.style);var p=i.apply(n,[c,j]),s;if(c.loadurl){var v=setTimeout(function(){p.disabled=true;h.apply(n,[c.loadtext,c,j])},100),y={};y[c.id]=j.id;a.isFunction(c.loaddata)?a.extend(y,c.loaddata.apply(j,[j.revert,c])):a.extend(y,c.loaddata);a.ajax({type:c.loadtype,url:c.loadurl,data:y,async:false,success:function(x){window.clearTimeout(v);s=x;p.disabled=false}})}else if(c.data){s=c.data;if(a.isFunction(c.data))s=
c.data.apply(j,[j.revert,c])}else s=j.revert;h.apply(n,[s,c,j]);p.attr("name",c.name);g.apply(n,[c,j]);e.apply(n,[c,j]);a(j).append(n);a(":input:visible:enabled:first",n).focus();c.select&&p.select();p.keydown(function(x){if(x.keyCode==27){p.blur();x.preventDefault();o()}});if("cancel"==c.onblur)p.blur(function(){v=setTimeout(o,500)});else if("submit"==c.onblur)p.blur(function(){n.submit()});else a.isFunction(c.onblur)?p.blur(function(){c.onblur.apply(j,[p.val(),c])}):p.blur(function(){});n.submit(function(x){v&&
clearTimeout(v);x.preventDefault();f.apply(n,[c,j]);if(a.isFunction(c.target)){x=c.target.apply(j,[p.val(),c]);a(j).html(x);j.editing=false;l.apply(j,[j.innerHTML,c]);a.trim(a(j).html())||a(j).html(c.placeholder)}else{x={};x[c.name]=p.val();x[c.id]=j.id;a.isFunction(c.submitdata)?a.extend(x,c.submitdata.apply(j,[j.revert,c])):a.extend(x,c.submitdata);a(j).html(c.indicator);a.ajax({type:c.submittype,url:c.target,data:x,success:function(C){a(j).html(C);j.editing=false;l.apply(j,[j.innerHTML,c]);a.trim(a(j).html())||
a(j).html(c.placeholder)}})}return false});a(j).bind("reset",o)}})})};a.editable={types:{defaults:{element:function(){var d=a('<input type="hidden">');a(this).append(d);return d},content:function(d){a(":input:first",this).val(d)},buttons:function(d,b){if(d.submit){var c=a('<input type="submit">');c.val(d.submit);a(this).append(c)}if(d.cancel){c=a('<input type="button">');c.val(d.cancel);a(this).append(c);a(c).click(function(){a(b).html(b.revert);b.editing=false})}}},text:{element:function(d){var b=
a("<input>");d.width!="none"&&b.width(d.width);d.height!="none"&&b.height(d.height);b.attr("autocomplete","off");a(this).append(b);return b}},textarea:{element:function(d){var b=a("<textarea>");d.rows?b.attr("rows",d.rows):b.height(d.height);d.cols?b.attr("cols",d.cols):b.width(d.width);a(this).append(b);return b}},select:{element:function(){var d=a("<select>");a(this).append(d);return d},content:function(d){if(String==d.constructor){eval("var json = "+d);for(var b in json)if(json.hasOwnProperty(b))if("selected"!=
b){d=a("<option>").val(b).append(json[b]);a("select",this).append(d)}}a("select",this).children().each(function(){a(this).val()==json.selected&&a(this).attr("selected","selected")})}}},addInputType:function(d,b){a.editable.types[d]=b}}})(jQuery);(function(a){a.extend(a.fn,{livequery:function(b,c,e){var f=this,g;if(a.isFunction(b)){e=c;c=b;b=undefined}a.each(a.livequery.queries,function(h,i){if(f.selector==i.selector&&f.context==i.context&&b==i.type&&(!c||c.$lqguid==i.fn.$lqguid)&&(!e||e.$lqguid==i.fn2.$lqguid))return(g=i)&&false});g=g||new a.livequery(this.selector,this.context,b,c,e);g.stopped=false;a.livequery.run(g.id);return this},expire:function(b,c,e){var f=this;if(a.isFunction(b)){e=c;c=b;b=undefined}a.each(a.livequery.queries,function(g,
h){if(f.selector==h.selector&&f.context==h.context&&(!b||b==h.type)&&(!c||c.$lqguid==h.fn.$lqguid)&&(!e||e.$lqguid==h.fn2.$lqguid)&&!this.stopped)a.livequery.stop(h.id)});return this}});a.livequery=function(b,c,e,f,g){this.selector=b;this.context=c||document;this.type=e;this.fn=f;this.fn2=g;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;f.$lqguid=f.$lqguid||a.livequery.guid++;if(g)g.$lqguid=g.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var b=
this;if(this.type)this.elements.unbind(this.type,this.fn);else this.fn2&&this.elements.each(function(c,e){b.fn2.apply(e)});this.elements=[];this.stopped=true},run:function(){if(!this.stopped){var b=this,c=this.elements,e=a(this.selector,this.context),f=e.not(c);this.elements=e;if(this.type){f.bind(this.type,this.fn);c.length>0&&a.each(c,function(g,h){a.inArray(h,e)<0&&a.event.remove(h,b.type,b.fn)})}else{f.each(function(){b.fn.apply(this)});this.fn2&&c.length>0&&a.each(c,function(g,h){a.inArray(h,
e)<0&&b.fn2.apply(h)})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var b=a.livequery.queue.length;b--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(a.fn[c]){var e=a.fn[c];a.fn[c]=function(){var f=e.apply(this,arguments);
a.livequery.run();return f}}})},run:function(b){if(b!=undefined)a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b);else a.each(a.livequery.queries,function(c){a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){b!=undefined?a.livequery.queries[b].stop():a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}});a.livequery.registerPlugin("append",
"prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var d=a.prototype.init;a.prototype.init=function(b,c){var e=d.apply(this,arguments);if(b&&b.selector){e.context=b.context;e.selector=b.selector}if(typeof b=="string"){e.context=c||document;e.selector=b}return e};a.prototype.init.prototype=a.prototype})(jQuery);function definePrimer(a){function d(b,c,e,f){this.container=b;this.width=c;this.height=e;this.primer=this;this.useGlobalMouseMove=f;this.actions=[];this.init();this.autoDraw=true}d.prototype={init:function(){a("html head").append("<style>.primer_text { position: absolute; margin: 0; padding: 0; line-height: normal; z-index: 0;}</style>");var b=a(this.container).eq(0);b.append('<div id="primer_text"></div>');var c=a("#primer_text",b).eq(0);c.css("position","relative");this.element=c;c=document.createElement("canvas");
c.width=this.width;c.height=this.height;c.style.zIndex="0";if(c.getContext)b.append(c);else window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a(c).appendTo(b).get(0));b=a("canvas",b);var e=b[0];this.context=e.getContext("2d");this.root=new d.Layer;this.root.bind(this);this.setupExt();var f=this;this.useGlobalMouseMove?a("body").bind("mousemove",function(g){if(a(g.target).parents().find(this.container)){var h=a(e);h=h.offset();g.localX=g.pageX-h.left;g.localY=g.pageY-h.top;f.ghost(g)}else f.outOfBounds()}):
b.eq(0).bind("mousemove",function(g){var h=a(g.currentTarget).offset();g.localX=g.pageX-h.left;g.localY=g.pageY-h.top;f.ghost(g)})},getX:function(){return 0},getY:function(){return 0},getGlobalX:function(){return 0},getGlobalY:function(){return 0},addChild:function(b){b.bind(this);this.root.addChild(b);this.draw()},removeChild:function(b){this.root.removeChild(b);this.draw()},draw:function(b){if(b||this.autoDraw){this.context.clearRect(0,0,this.width,this.height);a(".primer_text",this.element).remove();
this.setupExt();this.root.draw()}},ghost:function(b){this.root.ghost(b);for(var c in this.actions){b=this.actions[c];b[0](b[1])}this.actions=[]},outOfBounds:function(){},setupExt:function(){this.context.ext={textAlign:"left",font:"10px sans-serif"}}};d.Layer=function(){this.element=this.context=this.primer=null;this.children=[];this.calls=[];this.yVal=this.xVal=0;this.visibleVal=true;this.mouseoverVal=function(){};this.mouseoutVal=function(){};this.mouseWithin=false};d.Layer.prototype={bind:function(b){this.parent=
b;this.primer=b.primer;this.context=this.primer.context;this.element=this.primer.element;for(var c in this.children)this.children[c].bind(this)},getX:function(){return this.xVal},setX:function(b){this.xVal=b;this.primer&&this.primer.draw()},getY:function(){return this.yVal},setY:function(b){this.yVal=b;this.primer&&this.primer.draw()},getGlobalX:function(){return this.getX()+this.parent.getGlobalX()},getGlobalY:function(){return this.getY()+this.parent.getGlobalY()},getVisible:function(){return this.visibleVal},
setVisible:function(b){this.visibleVal=b;this.primer&&this.primer.draw()},addChild:function(b){b.bind(this);this.children.push(b);this.primer&&this.primer.draw()},removeChild:function(b){for(var c=[],e=0;e<this.children.length;e++){var f=this.children[e];f!=b&&c.push(f)}this.children=c},mouseover:function(b){this.mouseoverVal=b},mouseout:function(b){this.mouseoutVal=b},setFillStyle:function(b){this.calls.push(["fillStyle",b])},setStrokeStyle:function(b){this.calls.push(["strokeStyle",b])},setLineWidth:function(b){this.calls.push(["lineWidth",
b])},beginPath:function(){this.calls.push(["beginPath"])},moveTo:function(b,c){this.calls.push(["moveTo",b,c])},lineTo:function(b,c){this.calls.push(["lineTo",b,c])},quadraticCurveTo:function(b,c,e,f){this.calls.push(["quadraticCurveTo",b,c,e,f])},arc:function(b,c,e,f,g,h){this.calls.push(["arc",b,c,e,f,g,h])},fill:function(){this.calls.push(["fill"])},stroke:function(){this.calls.push(["stroke"])},fillRect:function(b,c,e,f){this.calls.push(["fillRect",b,c,e,f])},fillText:function(b,c,e,f,g){this.calls.push(["fillText",
b,c,e,f,g])},setTextAlign:function(b){this.calls.push(["textAlign",b])},setFont:function(b){this.calls.push(["font",b])},rect:function(b,c,e,f){this.beginPath();this.moveTo(b,c);this.lineTo(b+e,c);this.lineTo(b+e,c+f);this.lineTo(b,c+f);this.lineTo(b,c)},roundedRect:function(b,c,e,f,g){this.beginPath();this.moveTo(b,c+g);this.lineTo(b,c+f-g);this.quadraticCurveTo(b,c+f,b+g,c+f);this.lineTo(b+e-g,c+f);this.quadraticCurveTo(b+e,c+f,b+e,c+f-g);this.lineTo(b+e,c+g);this.quadraticCurveTo(b+e,c,b+e-g,c);
this.lineTo(b+g,c);this.quadraticCurveTo(b,c,b,c+g)},fillRoundedRect:function(b,c,e,f,g){this.roundedRect(b,c,e,f,g);this.fill()},draw:function(){if(this.getVisible()){this.context.save();this.context.translate(this.getX(),this.getY());for(var b in this.calls){var c=this.calls[b];switch(c[0]){case "strokeStyle":this.context.strokeStyle=c[1];break;case "lineWidth":this.context.lineWidth=c[1];break;case "fillStyle":this.context.fillStyle=c[1];break;case "fillRect":this.context.fillRect(c[1],c[2],c[3],
c[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(c[1],c[2]);break;case "lineTo":this.context.lineTo(c[1],c[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(c[1],c[2],c[3],c[4]);break;case "arc":this.context.arc(c[1],c[2],c[3],c[4],c[5],c[6]);break;case "fill":this.context.fill();break;case "stroke":this.context.stroke();break;case "fillText":this.extFillText(c[1],c[2],c[3],c[4],c[5]);break;case "textAlign":this.context.ext.textAlign=c[1];
case "font":this.context.ext.font=c[1]}}for(b=0;b<this.children.length;b++)this.children[b].draw();this.context.restore()}},extFillText:function(b,c,e,f,g){var h="";h+="left: "+(this.getGlobalX()+c)+"px;";h+="top: "+(this.getGlobalY()+e)+"px;";h+="width: "+f+"px;";h+="text-align: "+this.context.ext.textAlign+";";h+="color: "+this.context.fillStyle+";";h+="font: "+this.context.ext.font+";";this.element.append('<p class="primer_text '+g+'" style="'+h+'">'+b+"</p>")},ghost:function(b){if(this.getVisible()){this.context.save();
this.context.translate(this.getX(),this.getY());for(var c in this.calls){var e=this.calls[c];switch(e[0]){case "fillRect":this.ghostFillRect(b,e[1],e[2],e[3],e[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(e[1],e[2]);break;case "lineTo":this.context.lineTo(e[1],e[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(e[1],e[2],e[3],e[4]);break;case "arc":this.context.arc(e[1],e[2],e[3],e[4],e[5],e[6]);break;case "fill":this.ghostFill(b);break}}if(!jQuery.browser.safari){b.localX-=
this.getX();b.localY-=this.getY()}for(c in this.children)this.children[c].ghost(b);if(!jQuery.browser.safari){b.localX+=this.getX();b.localY+=this.getY()}this.context.restore()}},ghostDetect:function(b){if(jQuery.browser.safari){testX=b.localX;testY=b.localY}else{testX=b.localX-this.getX();testY=b.localY-this.getY()}if(this.context.isPointInPath(testX,testY)){this.mouseWithin||this.primer.actions.push([this.mouseoverVal,b]);this.mouseWithin=true}else{this.mouseWithin&&this.primer.actions.push([this.mouseoutVal,
b]);this.mouseWithin=false}},ghostFillRect:function(b,c,e,f,g){this.context.beginPath();this.context.moveTo(c,e);this.context.lineTo(c+f,e);this.context.lineTo(c+f,e+g);this.context.lineTo(c,e+g);this.context.lineTo(c,e);this.ghostDetect(b)},ghostFill:function(b){this.ghostDetect(b)}};return d}var Primer=definePrimer(window.jQuery);(function(a){a.smartPoller=function(d,b){if(a.isFunction(d)){b=d;d=1000}(function c(){setTimeout(function(){b.call(this,c)},d);d*=1.5})()}})(jQuery);(function(a){a.fn.spamjax=function(d,b){if(a.isFunction(b)){var c=d;d=b;b=c}b=b||{};c={};if(!a.facebox)b.facebox=null;c.complete=function(e,f){d.call(this,e.responseText,f)};if(b.confirmation)c.beforeSubmit=function(){var e=confirm(b.confirmation);if(!e)return false;b.facebox&&a.facebox.loading()};else if(b.facebox)c.beforeSubmit=a.facebox.loading;return a(this).ajaxForm(a.extend(b,c))}})(jQuery);(function(a){var d=function(){var b=typeof document.selection!=="undefined"&&typeof document.selection.createRange!=="undefined";return{getSelectionRange:function(c){var e,f,g;c.focus();if(typeof c.selectionStart!=="undefined"){e=c.selectionStart;f=c.selectionEnd}else if(b){e=document.selection.createRange();f=e.text.length;if(e.parentElement()!==c)throw"Unable to get selection range.";if(c.type==="textarea"){g=e.duplicate();g.moveToElementText(c);g.setEndPoint("EndToEnd",e);e=g.text.length-f}else{c=
c.createTextRange();c.setEndPoint("EndToStart",e);e=c.text.length}f=e+f}else throw"Unable to get selection range.";return{start:e,end:f}},getSelectionStart:function(c){return this.getSelectionRange(c).start},getSelectionEnd:function(c){return this.getSelectionRange(c).end},setSelectionRange:function(c,e,f){var g;c.focus();if(typeof f==="undefined")f=e;if(typeof c.selectionStart!=="undefined")c.setSelectionRange(e,f);else if(b){g=c.value;c=c.createTextRange();f-=e+g.slice(e+1,f).split("\n").length-
1;e-=g.slice(0,e).split("\n").length-1;c.move("character",e);c.moveEnd("character",f);c.select()}else throw"Unable to set selection range.";},getSelectedText:function(c){var e=this.getSelectionRange(c);return c.value.substring(e.start,e.end)},insertText:function(c,e,f,g,h){g=g||f;var i=e.length;i=f+i;var l=c.value.substring(0,f);g=c.value.substr(g);c.value=l+e+g;h===true?this.setSelectionRange(c,f,i):this.setSelectionRange(c,i)},replaceSelectedText:function(c,e,f){var g=this.getSelectionRange(c);
this.insertText(c,e,g.start,g.end,f)},wrapSelectedText:function(c,e,f,g){e=e+this.getSelectedText(c)+f;this.replaceSelectedText(c,e,g)}}}();window.Selection=d;a.fn.extend({getSelectionRange:function(){return d.getSelectionRange(this[0])},getSelectionStart:function(){return d.getSelectionStart(this[0])},getSelectionEnd:function(){return d.getSelectionEnd(this[0])},getSelectedText:function(){return d.getSelectedText(this[0])},setSelectionRange:function(b,c){return this.each(function(){d.setSelectionRange(this,
b,c)})},insertText:function(b,c,e,f){return this.each(function(){d.insertText(this,b,c,e,f)})},replaceSelectedText:function(b,c){return this.each(function(){d.replaceSelectedText(this,b,c)})},wrapSelectedText:function(b,c,e){return this.each(function(){d.wrapSelectedText(this,b,c,e)})}})})(jQuery);(function(a){a.fn.tipsy=function(d){d=a.extend({fade:false,gravity:"n",title:"title",fallback:""},d||{});this.hover(function(){a.data(this,"cancel.tipsy",true);var b=a.data(this,"active.tipsy");if(!b){b=a('<div class="tipsy"><div class="tipsy-inner"/></div>');b.css({position:"absolute",zIndex:100000});a.data(this,"active.tipsy",b)}if(this.hasAttribute("title")||!this.hasAttribute("original-title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var c;if(typeof d.title==
"string")c=a(this).attr(d.title=="title"?"original-title":d.title);else if(typeof d.title=="function")c=d.title.call(this);b.find(".tipsy-inner").html(c||d.fallback);c=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});b.get(0).className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var e=b[0].offsetWidth,f=b[0].offsetHeight,g=typeof d.gravity=="function"?d.gravity.call(this):d.gravity;switch(g.charAt(0)){case "n":b.css({top:c.top+
c.height,left:c.left+c.width/2-e/2}).addClass("tipsy-north");break;case "s":b.css({top:c.top-f,left:c.left+c.width/2-e/2}).addClass("tipsy-south");break;case "e":b.css({top:c.top+c.height/2-f/2,left:c.left-e}).addClass("tipsy-east");break;case "w":b.css({top:c.top+c.height/2-f/2,left:c.left+c.width}).addClass("tipsy-west");break}d.fade?b.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8}):b.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",false);var b=this;
setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var c=a.data(b,"active.tipsy");d.fade?c.stop().fadeOut(function(){a(this).remove()}):c.remove()}},100)});this.bind("tipsy.reload",function(){if(this.hasAttribute("title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var b;if(typeof d.title=="string")b=a(this).attr(d.title=="title"?"original-title":d.title);else if(typeof d.title=="function")b=d.title.call(this);var c=a.data(this,"active.tipsy");c.find(".tipsy-inner").text(b||
d.fallback);b=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});var e=c[0].offsetWidth,f=c[0].offsetHeight,g=typeof d.gravity=="function"?d.gravity.call(this):d.gravity;switch(g.charAt(0)){case "n":c.css({top:b.top+b.height,left:b.left+b.width/2-e/2});break;case "s":c.css({top:b.top-f,left:b.left+b.width/2-e/2});break;case "e":c.css({top:b.top+b.height/2-f/2,left:b.left-e});break;case "w":c.css({top:b.top+b.height/2-f/2,left:b.left+b.width});break}})};a.fn.tipsy.autoNS=
function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"}})(jQuery);jQuery.fn.truncate=function(a,d){d=jQuery.extend({chars:/\s/,trail:["...",""]},d);var b={},c=$.browser.msie;function e(f){c&&f.style.removeAttribute("filter")}return this.each(function(){for(var f=jQuery(this),g=f.html().replace(/\r\n/gim,""),h=g,i=/<\/?[^<>]*\/?>/gim,l,j={},o=$("*").index(this);(l=i.exec(h))!=null;)j[l.index]=l[0];h=jQuery.trim(h.split(i).join(""));if(h.length>a){for(;a<h.length;){l=h.charAt(a);if(l.match(d.chars)){h=h.substring(0,a);break}a--}if(g.search(i)!=-1){i=0;for(eachEl in j){h=
[h.substring(0,eachEl),j[eachEl],h.substring(eachEl,h.length)].join("");if(eachEl<h.length)i=h.length}f.html([h.substring(0,i),h.substring(i,h.length).replace(/<(\w+)[^>]*>.*<\/\1>/gim,"").replace(/<(br|hr|img|input)[^<>]*\/?>/gim,"")].join(""))}else f.html(h);b[o]=g;f.html(["<div class='truncate_less'>",f.html(),d.trail[0],"</div>"].join("")).find(".truncate_show",this).click(function(){f.find(".truncate_more").length==0&&f.append(["<div class='truncate_more' style='display: none;'>",b[o],d.trail[1],
"</div>"].join("")).find(".truncate_hide").click(function(){f.find(".truncate_more").css("background","#fff").fadeOut("normal",function(){f.find(".truncate_less").css("background","#fff").fadeIn("normal",function(){e(this);$(this).css("background","none")});e(this)});return false});f.find(".truncate_less").fadeOut("normal",function(){f.find(".truncate_more").fadeIn("normal",function(){e(this)});e(this)});jQuery(".truncate_show",f).click(function(){f.find(".truncate_less").css("background","#fff").fadeOut("normal",
function(){f.find(".truncate_more").css("background","#fff").fadeIn("normal",function(){e(this);$(this).css("background","none")});e(this)});return false});return false})}})};GitHub.gravatar=function(a,d){d=d||35;var b=location.protocol=="https:"?"https://secure.gravatar.com":"http://gravatar.com",c=location.protocol=="https:"?"https":"http";return'<img src="'+b+"/avatar/"+a+"?s="+d+"&d="+c+"%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-"+d+'.png" />'};function debug(a,d){if(GitHub.debug&&console&&console.log)d?console.log(a,d):console.log(a)}Function.prototype.delay=function(a){return setTimeout(this,a)};
String.prototype.capitalize=function(){return this.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};jQuery.expr[":"].Contains=function(a,d,b){return(a.textContent||a.innerText||"").toLowerCase().indexOf(b[3].toLowerCase())>=0};$.fn.scrollTo=function(a,d){var b;if(typeof a=="number"||!a){d=a;b=this;a="html,body"}else{b=a;a=this}b=$(b).offset().top-30;$(a).animate({scrollTop:b},d||1000);return this};
$.gitbox=function(a){$.facebox(function(){$.get(a,function(d){$.facebox(d);$("#facebox .footer").hide()})})};$.fn.spin=function(){return this.after('<img src="/images/modules/ajax/indicator.gif" id="spinner"/>')};$.fn.stopSpin=function(){$("#spinner").remove();return this};GitHub.Ajax={};GitHub.Ajax.spinner="/images/modules/ajax/indicator.gif";GitHub.Ajax.error="/images/modules/ajax/error.png";
$(function(){$(".previewable-comment-form").previewableCommentForm();$(".cards_select").cardsSelect();$(document).bind("reveal.facebox",function(){$(".cards_select").cardsSelect()});$(".flash .close").click(function(){$(this).closest(".flash").fadeOut(300)});$(".tooltipped").each(function(){var e=$(this),f=e.hasClass("downwards")?"n":"s";f=e.hasClass("rightwards")?"w":f;f=e.hasClass("leftwards")?"e":f;e.tipsy({gravity:f})});$(".toggle_link").click(function(){$($(this).attr("href")).toggle();return false});
$(".hide_alert").live("click",function(){$("#site_alert").slideUp();$.cookie("hide_alert_vote","t",{expires:7,path:"/"});return false});$(".hide_div").click(function(){$(this).parents("div:first").fadeOut();return false});$("#login_field").focus();$("#versions_select").change(function(){location.href=this.value});$(document).bind("loading.facebox",function(){$(".clippy").hide()});$(document).bind("close.facebox",function(){$(".clippy").show()});$.fn.facebox&&$("a[rel*=facebox]").facebox();$.fn.truncate&&
$(".truncate").bind("truncate",function(){$(this).truncate(50,{chars:/.*/})}).trigger("truncate");$.fn.relatizeDate&&$(".relatize").relatizeDate();$('a[href=#][alt^=""]').hover(function(){window.status=$(this).attr("alt")},function(){window.status=""});var a=$(".topsearch input[name=q]").enhancedField();$.hotkey("s",function(){a.val("").focus()});if("_auth_token"in window){var d=window.location.pathname,b=window._auth_token,c="&request_uri="+encodeURIComponent(d)+"&authenticity_token="+encodeURIComponent(b);
$.ajaxSetup({beforeSend:function(e,f){e.setRequestHeader("Accept","text/javascript");if(f.data)f.data+=c;else if(!f.data){f.data=c;e.setRequestHeader("Content-Type",f.contentType)}}})}else $.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")}});$("button, .minibutton").mousedown(function(){$(this).addClass("mousedown")}).bind("mouseup mouseleave",function(){$(this).removeClass("mousedown")});$("ul.inline-tabs").tabs();$(".js-all-locales").click(function(){$(".locales").addClass("showing-all-locales");
$(document).scrollTop(9999);return false})});function clippyCopiedCallback(a){var d=$("#clippy_tooltip_"+a);if(d.length!=0){d.attr("title","copied!").trigger("tipsy.reload");setTimeout(function(){d.attr("title","copy to clipboard")},500)}};GitHub.Autocomplete=function(){};GitHub.Autocomplete.gravatars={};GitHub.Autocomplete.visibilities={};
GitHub.Autocomplete.prototype={usersURL:"/autocomplete/users",reposURL:"/autocomplete/repos",myReposURL:"/autocomplete/repos/mine",settings:{},repos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;return a.autocomplete(this.reposURL,$.extend({delay:10,width:210,minChars:2,selectFirst:false,formatItem:function(d){d=d[0].split(" ");var b=d[0];d=d[1];GitHub.Autocomplete.visibilities[b]=d;return b},formatResult:function(d){return d[0].split(" ")[0]}},this.settings)).result(function(){var d=
$(this);setTimeout(function(){d.val()&&d.addClass("ac-accept")},30)}).keypress(function(){$(this).removeClass("ac-accept")}).parents("form:first").submit(function(){$(this).removeClass("ac-accept")}).end()},myRepos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;if(!github_user)return a;return a.autocomplete(this.myReposURL,$.extend({delay:10,width:210,selectFirst:false,formatItem:function(d){d=d[0].split(" ");var b=d[0];d=d[1];GitHub.Autocomplete.visibilities[b]=d;return b},formatResult:function(d){return d[0].split(" ")[0]}},
this.settings)).result(function(d,b){window.location="/"+b[0].split(" ")[0];return false}).keydown(function(d){if(!/\//.test(a.val())&&d.keyCode==9)if(d=$(".ac_results li:first").text()){a.val(d);window.location="/"+d;return false}}).end()},users:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;return a.autocomplete(this.usersURL,$.extend({delay:10,minChars:1,formatItem:function(d){d=d[0].split(" ");var b=d[0];d=GitHub.gravatar(d[1],24);GitHub.Autocomplete.gravatars[b]=d;return d+" "+
b},formatResult:function(d){return d[0].split(" ")[0]}},this.settings)).result(function(){var d=$(this);setTimeout(function(){d.val()&&d.addClass("ac-accept")},30)}).keypress(function(){$(this).removeClass("ac-accept")}).parents("form:first").submit(function(){$(this).removeClass("ac-accept")}).end()}};$.userAutocomplete=function(){$(".autocompleter").userAutocomplete()};$.fn.userAutocomplete=function(){return(new GitHub.Autocomplete).users(this)};$.repoAutocomplete=function(){};
$.fn.repoAutocomplete=function(){return(new GitHub.Autocomplete).repos(this)};$.myReposAutocomplete=function(){$(".my_repos_autocompleter").myReposAutocomplete()};$.fn.myReposAutocomplete=function(){return(new GitHub.Autocomplete).myRepos(this)};$(function(){$.userAutocomplete();$.myReposAutocomplete()});GitHub.highlightLines=function(a){var d;if(a){$(".line").css("background-color","transparent");d=$(this).attr("rel");if(a.shiftKey)d=window.location.hash.replace(/-\d+/,"")+"-"+d.replace(/\D/g,"");window.location.hash=d}else d=window.location.hash;if(a=d.match(/#?(?:L|-)(\d+)/g)){a=$.map(a,function(b){return parseInt(b.replace(/\D/g,""))});if(a.length==1)return $("#LC"+a[0]).css("background-color","#ffc");for(d=a[0];d<=a[1];d++)$("#LC"+d).css("background-color","#ffc");$("#LC"+a[0]).scrollTo(1)}return false};
GitHub.scrollToHilightedLine=function(){var a;a=window.location.hash;if(a=a.match(/^#?(?:L|-)(\d+)$/g)){a=$.map(a,function(d){return parseInt(d.replace(/\D/g,""))});$("#LID"+a[0]).scrollTo(1)}};
$(function(){GitHub.scrollToHilightedLine();GitHub.highlightLines();$(".line_numbers span").mousedown(GitHub.highlightLines);if(!GitHub.hasWriteAccess||!GitHub.currentRef)$("#file-edit-link").closest("li").remove();else{$("#file-edit-link").click(function(){var a=$(this).attr("rel").replace("__ref__",GitHub.currentRef);$("#readme").hide();$("#files").children().hide().end().append('<div class="blob-editor"><img src="/images/modules/browser/loading.gif"/></div>');$(".blob-editor").load(a,{},function(){$("#files").scrollTo(500)});
return false});$("#cancel-blob-editing").live("click",function(){$(".blob-editor").remove();$("#readme").show();$("#files").children().show();return false})}});$(function(){var a=2,d=7,b=30;$(".diverge-widget").each(function(){var c=$(this),e=new Date(c.attr("last-updated"));e=(new Date-e)/1000/3600/24;if(e<=a)c.addClass("hot");else if(e<=d)c.addClass("fresh");else e<=b?c.addClass("stale"):c.addClass("old")})});GitHub.Commit={dumpEmptyClass:function(){$(this).removeClass("empty")},addEmptyClass:function(){!$(this).data("clicked")&&$(this).text()=="0"&&$(this).addClass("empty")},highlightLine:function(){$(this).parent().css("background","#ffc")},unhighlightLine:function(){$(this).data("clicked")||$(this).parent().css("background","")},jumpToHashFile:function(){if(window.location.hash&&!/diff-\d+/.test(window.location.hash)){var a,d=window.location.hash;if(a=d.match(/-P(\d+)/)){d=d.replace(a[0],"");a=a[1]}d=
$('#files > .file > .meta .path:contains("'+d.replace("#","")+'")');if(d.length>0){var b=d.parents(".file");$(b).scrollTo(1);a&&setTimeout(function(){GitHub.Commit.highlightLine.call($(b).find(".cp-"+a))},50)}}},observeHash:function(){if(window.location.hash!=GitHub.Commit.oldHash){GitHub.Commit.oldHash=window.location.hash;GitHub.Commit.jumpToHashFile()}}};
$(function(){GitHub.Commit.jumpToHashFile();GitHub.Commit.oldHash=window.location.hash;setInterval(GitHub.Commit.observeHash,50);function a(b){b.find(".relatize").relatizeDate();b.editableComment()}a($("#comments .comment"));function d(b){b.find("ul.inline-tabs").tabs();b.find(".show-inline-comment-form a").click(function(){b.find(".inline-comment-form").show();$(this).hide();return false});var c=b.find(".previewable-comment-form").previewableCommentForm().closest("form");c.submit(function(){c.find(".ajaxindicator").show();
c.find("button").attr("disabled","disabled");c.ajaxSubmit({success:function(e){var f=c.closest(".clipper"),g=f.find(".comment-holder");if(g.length==0)g=f.prepend($('<div class="inset comment-holder"></div>')).find(".comment-holder");e=$(e);g.append(e);a(e);c.find("textarea").val("");c.find(".ajaxindicator").hide();c.find("button").attr("disabled","")}});return false})}$(".add-bubble").live("click",function(){var b=$(this).closest("tr"),c=b.next("tr.inline-comments");if(c.length>0){c.find(".inline-comment-form").show();
c.find(".show-inline-comment-form").hide()}else $.get($(this).attr("remote"),function(e){b.after(e);c=b.next("tr.inline-comments");d(c);c.find(".inline-comment-form").show();c.find(".show-inline-comment-form").hide()})});$(".inline-comment-placeholder").each(function(){var b=$(this);$.get(b.attr("remote"),function(c){c=$(c);b.closest("tr").replaceWith(c);d(c);a(c.find(".comment"))})});$("#files .show-inline-comments-toggle").change(function(){this.checked?$(this).closest(".file").find("tr.inline-comments").show():
$(this).closest(".file").find("tr.inline-comments").hide()}).change();$("#inline_comments_toggle input").change(function(){this.checked?$("#comments").removeClass("only-commit-comments"):$("#comments").addClass("only-commit-comments")}).change();$(".js-show-suppressed-diff").click(function(){$(this).parent().next().show();$(this).parent().hide();return false})});GitHub.Commits={elements:[],current:null,selected:function(){return $(this.elements).eq(this.current)},select:function(a){this.current=a;$(".selected").removeClass("selected");return this.elements.eq(a).addClass("selected")},next:function(){if(this.current!==null){if(this.elements.length-1!=this.current){var a=this.select(++this.current);a.offset().top-$(window).scrollTop()+50>$(window).height()&&a.scrollTo(200)}}else this.select(0)},prev:function(){if(!this.current){this.elements.eq(0).removeClass("selected");
return this.current=null}var a=this.select(--this.current);a.offset().top-$(window).scrollTop()<0&&a.scrollTo(200)},link:function(a){if(GitHub.Commits.current===null)return false;window.location=GitHub.Commits.selected().find("[hotkey="+a+"]").attr("href")}};
$(function(){GitHub.Commits.elements=$(".commit");$.hotkeys({c:function(){GitHub.Commits.link("c")},p:function(){GitHub.Commits.link("p")},t:function(){GitHub.Commits.link("t")},j:function(){GitHub.Commits.next()},k:function(){GitHub.Commits.prev()}});$("#invite_link > a").click(function(){var a=location.pathname.match(/(.+\/commits)(\/|$)/)[1]+"/invitees";$.post(a,{},function(d){if(d.length==0){$("#invitee_box > p").text("Everyone is already a GitHub user and/or there weren't any valid emails");
$("#invitee_box input").attr("disabled","disabled")}else{for(var b in d){var c='<li><label><input name="emails[]" value="'+d[b][0]+'" type="checkbox" /> ';c+=d[b][1]+" <small> - "+d[b][0]+"</label></li>";$("#invitees").append(c)}$("#invitee_box > p").hide()}},"json");$(this).hide();$("#invitee_box").show();return false});$("#invite_form").submit(function(){$(this).find("input[type=submit]").attr("value","Sending Invites...").attr("disabled","disabled");$.post($(this).attr("action"),$(this).serialize(),
function(){$("#invitee_box").html("<h3>Thanks!</h3>Your invites have been sent.")});return false});$("#invitee_box span a").click(function(){$("#invitee_box").hide();return false})});$(function(){$(".contextswitch").each(function(){var a=$(this),d=a.find(".toggle");d.click(function(){a.hasClass("nochoices")||a.toggleClass("activated")})})});$(function(){$("#your_repos").repoList({selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"});$("#watched_repos").repoList({selector:"#watched_repo_listing",ajaxUrl:"/dashboard/ajax_watched_repos"});$("#org_your_repos").length>0&&$("#org_your_repos").repoList({selector:"#repo_listing",ajaxUrl:location.pathname+"/ajax_your_repos"});$(".reveal_commits, .hide_commits").live("click",function(){var a=$(this).parents(".details");a.find(".reveal, .hide_commits, .commits").toggle();return false});
$(".octofication .hide a").click(function(){$.post(this.href,null,function(){$(".octofication").fadeOut()});return false});$(".dashboard-notice .dismiss").click(function(){var a=$(this).closest(".dashboard-notice");$.del(this.href,null,function(){a.fadeOut()});return false})});$(function(){if($(".repohead").length!=0){$("#repo_details");var a=GitHub.hasAdminAccess,d=GitHub.watchingRepo,b=GitHub.hasForked,c=$("#repository_description"),e=$("#repository_homepage");$(".pledgie").length>0&&$("#repo_details").addClass("pledgified");$(".repohead input[type=search]").enhancedField();if(a){$(".editable-only").show();$(".for-owner").show()}b?$(".for-forked").show():$(".for-notforked").show();if(github_user)if(GitHub.hasForkOfRepo&&GitHub.hasForkOfRepo!=""){$(".for-hasfork").show();
$("#fork_box").length==0&&$("#your_fork_button").attr("href","/"+GitHub.hasForkOfRepo);$("ul.repo-stats li.forks").addClass("forked").find("a").attr("title","Forks \u2014 You have a fork")}$("#download_button").attr("href",GitHub.downloadRepo);c.repoInlineEdit({name:"description",is_owner:a});e.repoInlineEdit({name:"homepage",is_owner:a});$(".subnav-bar").length!=0&&$(".repohead").removeClass("emptyrepohead");if(d){$("#unwatch_button").show();$("ul.repo-stats li.watchers").addClass("watching").find("a").attr("title",
"Watchers \u2014 You're Watching")}else $("#watch_button").show();if(!github_user){$("#watch_button").enticeToRegister();$("#fork_button").enticeToRegister()}github_user&&GitHub.hasWriteAccess&&$("#pull_request_item").show()}});$(function(){var a=$("#url_box");if(a.length!=0){a=a.find("ul.clone-urls a");var d=$("#url_field"),b=$("#url_description strong"),c=$("#url_box_clippy"),e=$();a.click(function(){var f=$(this);d.val(f.attr("href"));c.text(f.attr("href"));b.text(f.attr("data-permissions"));e.removeClass("selected");e=f.parent("li").addClass("selected");return false});$(a[0]).click();d.mouseup(function(){this.select()})}});$(function(){var a,d;$("#downloads .remove").click(function(){a=$(this).parents("tr").attr("id");d=$(this).attr("form_action");$("#delete_download_confirm h3").text("Delete file '"+$(this).attr("filename")+"'?");$("#delete_download_confirm").slideDown(300);return false});$("#delete_download_confirm .delete").click(function(){$("#"+a+" .spinner").show();$("#delete_download_confirm").slideUp(300);$.post(d,{_method:"delete"},function(){$("#"+a).hide();$("#s3_downloads tr:visible").size()==1&&$("#s3_downloads tr:last").show()});
return false});$("#delete_download_confirm .cancel").click(function(){$("#delete_download_confirm").slideUp(300);return false});if($("#basic_select").size()>0){var b=$.cookie("uploader_selection");if(b){if(b=="html"){$("#flash_upload").hide();$("#html_upload").show()}}else if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){$.cookie("uploader_selection","html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show()}else $.cookie("uploader_selection","flash",{expires:60,path:"/"})}$("#basic_select").click(function(){$.cookie("uploader_selection",
"html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show();return false});$("#flash_select").click(function(){$.cookie("uploader_selection","flash",{expires:60,path:"/"});$("#flash_upload").show();$("#html_upload").hide();return false});$("#upload").click(function(){var c=$("#file").val();if(!c||c=="")return false;$("#upload").attr("disabled","disabled").val("Authorizing...");$.ajax({type:"POST",url:location.href,data:{file_size:1,file_name:c,description:$("#description").val()},
datatype:"json",success:function(e){e=eval("("+e+")");$.each(e,function(f,g){$("#upload_form #"+f).val(g)});$("#upload_form #filename").val(c);$("#upload_form #key").val(e.prefix+c);$("#upload").val("Uploading...");$("#upload_form #submit").click()},error:function(e){e=eval("("+e.responseText+")");alert(e.error);$("#upload").attr("disabled","").val("Upload")}});return false})});GitHub.editableGenerator=function(a){return function(d,b){var c={id:"field",tooltip:"Click to edit!",indicator:"Saving...",data:function(e){return $(b).attr("data")||e},style:"display: inline",onblur:"submit",callback:function(){(function(){$(b).attr("data")&&$(b).attr("data",$(b).text());$(b).trigger("truncate").next().show();$(b).trigger("afterSave.editableGenerator")}).delay(20)}};return $(this).editable($(this).attr("rel"),$.extend({},c,a))}};
$(function(){$(".edit_link").click(function(){$(this).prev().trigger("click");return false})});$(function(){$(".git_url_facebox").click(function(){$.facebox($($(this).attr("rel")).html(),"tip");return false});$(".repo span.edit").each(GitHub.editableGenerator({width:"350px"}));$(".repo span.editarea").each(GitHub.editableGenerator({type:"textarea",width:"550px",height:"100px",cancel:"Cancel",submit:"OK"}));$("span.edit, span.editarea").click(function(){$(this).next().hide()});$("#run_postreceive_test").click(function(){$.post(location.href+"/test_postreceive",{});$.facebox($("#postreceive_test").text());
return false});$("#repository_postreceive_url").bind("afterSave.editableGenerator",function(){$("#repository_postreceive_url").text().slice(0,4)=="http"?$("#run_postreceive_test").show():$("#run_postreceive_test").hide()});$(".toggle_watch").click(function(){if(!github_user)return true;$("#watch_button, #unwatch_button").toggle();$.post($(this).attr("href"),{});return false});$(".watch_button, .unwatch_button").click(function(){if(!github_user)return true;$.post($(this).attr("href"),{});$(this).parent().find(".watch_button, .unwatch_button").toggle();
return false});$("#donation_creation_in_progress").length>0&&$("#activate_pledgie_button").attr("title","We're creating your Pledgie account. We'll PM you when it's ready!").find("span").text("Creating account...");$(".pagehead .nspr .btn-pull-request").click(function(){var f=$(this).attr("href");$.facebox(function(){$.get(f,function(g){$.facebox(g);$("#facebox .footer").hide()})});return false});$(".pagehead .ospr .btn-pull-request").click(function(){var f=location.pathname,g=f.split("/")[4]||"master",
h=f.split("/").slice(0,3).join("/");if("comparisonHead"in window)g=comparisonHead;$.facebox(function(){$.get(h+"/pull_request/"+g,function(i){$.facebox(i);$("#facebox .footer").hide();$.userAutocomplete()})});return false});$(".test_hook").click(function(){var f=$(this),g=f.prev(".test_hook_message");g.text("Sending payload...");var h=f.attr("href");$.post(h,{name:f.attr("rel")||""},function(){g.text("Payload deployed")});return false});$(".add_postreceive_url").click(function(){var f=$(this).prev("dl.form").clone();
console.log(f);f.find("input").val("");$(this).before(f);return false});$(".remove_postreceive_url").live("click",function(){if($(this).closest(".fields").find("dl.form").length<2){alert("You cannot remove the last post-receive URL");return false}$(this).closest("dl.form").remove();return false});$("#pull_request .select_all").live("click",function(){$("#facebox :checkbox").attr("checked",true);return false});$("#pull_request .add_recipient").live("click",function(){var f=$(this).prev().val();$(this).prev().val("").css("background",
"Window");if($.trim(f)){var g=$("#pull_request .recipients ul");g=g.find("li").map(function(){return $.trim($(this).text())});if($.inArray(f,g)>=0)return false;$("#pull_request .recipients ul").prepend('<li><label><input type="checkbox" name="message[to][]" value="'+f+'"/> '+f+"</label>").end().find(":checkbox:first").attr("checked",true);return false}});$("#pull_request_form").live("submit",function(){var f=[],g=$(this).find("input[name='message[to][]']");g.each(function(){if($(this).is(":checkbox")&&
!$(this).attr("checked")||$(this).is(":text")&&$(this).val()=="")f.push($(this))});f.length==g.length?$("#pull_request_error").show().text("Please select at least one recipient."):$(this).ajaxSubmit(function(){$("#pull_request_error").remove();$("#pull_request").find("h1").text("Sent!").end().find(".pull_request_inside").empty().append("<p>Your pull request was sent.</p>").end().find(".actions span").remove().end().find("#close_facebox").text("Close");var h=setTimeout(function(){$(document).trigger("close.facebox")},
2500);$(document).one("close.facebox",function(){clearTimeout(h)})});return false});$(".unlock_branch").click(function(){var f=location.pathname.split("/");f="/"+f[1]+"/"+f[2]+"/unlock_branch/"+f[4];var g=$(this).parents(".notification");$(this).spin().remove();$.post(f,function(){g.hide()});return false});if($("#edit_repo").length>0){var a=$("#change_default_branch"),d=a.find("select"),b=d.val();d.change(function(){a.removeClass("success").removeClass("error").addClass("loading");$.put(a.closest("form").attr("action"),
{field:"repository_master_branch",value:d.val()},{success:function(){a.removeClass("loading").addClass("success");b=d.val()},error:function(){d.val(b);a.removeClass("loading").addClass("error")}})});$(".addon.feature").each(function(){var f=$(this);f.find(":checkbox").change(function(){var g=this;f.removeClass("success").removeClass("error").addClass("loading");$.put(f.closest("form").attr("action"),{field:g.name,value:g.checked?1:0},{success:function(){f.removeClass("loading").addClass("success")},
error:function(){g.checked=!g.checked;f.removeClass("loading").addClass("error")}})})});$("#pledgie_toggle :checkbox").change(function(){$.facebox({div:"#pledgie_box"});this.checked=!this.checked});$("#pages_toggle :checkbox").change(function(){$.facebox({div:"#pages_box"});this.checked=!this.checked});$("#autoresponse_toggle :checkbox").change(function(){if(this.checked){$.facebox({div:"#auto_response_editor"});this.checked=!this.checked}else{var f=$(this).closest(".addon");f.removeClass("success").removeClass("error").addClass("loading");
$.put(window.location.pathname.replace("edit","update_pull_request_auto_response"),{success:function(){f.removeClass("loading").addClass("success");f.find(".editlink").remove()}})}});var c=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())};$("#push_pull_collabs input.ac-add-user-input").userAutocomplete().result(c);$("#push_pull_collabs form").submit(function(){var f=$(this).find(":text"),g=f.val();debug("Trying to add %s...",g);if(!g||!f.data("completed"))return false;
function h(i){i!=null?$("#push_pull_collabs .error").text(i).show():$("#push_pull_collabs .error").hide()}h();$.ajax({url:this.action,data:{member:g},type:"POST",dataType:"json",success:function(i){f.val("").removeClass("ac-accept");i.error?h(i.error):$("#push_pull_collabs ul.usernames").append(i.html)},error:function(){h("An unidentfied error occurred, try again?")}});return false});$("#push_pull_collabs .remove-user").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});
$("#teams form").submit(function(){var f=$(this).find("select"),g=f.val();function h(i){i!=null?$("#push_pull_collabs .error").text(i).show():$("#push_pull_collabs .error").hide()}if(g==""){h("You must select a team");return false}h();$.ajax({url:this.action,data:{team:g},type:"POST",dataType:"json",success:function(i){f.val("");i.error?h(i.error):$("#teams ul.teams").append(i.html)},error:function(){h("An unidentfied error occurred, try again?")}});return false});$("#teams .remove-team").live("click",
function(){$.del(this.href);$(this).closest("li").remove();return false});$(".repohead").is(".vis-public")?$(".private-only").hide():$(".public-only").hide();var e=$("#toggle_visibility");e.find("input[type=radio]").change(function(){if($(this).attr("value")=="public"&&!confirm("Are you POSITIVE you want to make this private repository public?")){$("input[value=private]").attr("checked","checked");return false}if($(this).attr("value")=="private"&&!confirm("Are you POSITIVE you want to make this public repository private?  All public watchers will be removed.")){$("input[value=public]").attr("checked",
"checked");return false}var f=this;e.removeClass("success").removeClass("error").addClass("loading");$.ajax({type:"POST",url:e.closest("form").attr("action"),success:function(){if($(".repohead").is(".vis-public")){$(".repohead").removeClass("vis-public").addClass("vis-private");$(".private-only").show();$(".public-only").hide()}else{$(".repohead").removeClass("vis-private").addClass("vis-public");$(".private-only").hide();$(".public-only").show()}e.removeClass("loading").addClass("success")},error:function(){f.checked=
false;e.removeClass("loading").addClass("error")}})});$("#copy_permissions ul li a").click(function(){$(this).parents("form").submit();return false});$("#delete_repo").click(function(){var f="Are you sure you want to delete this repository?  There is no going back.";return confirm(f)});$("#reveal_delete_repo_info").click(function(){$(this).toggle();$("#delete_repo_info").toggle();return false});$(document).bind("reveal.facebox",function(){$("#facebox .renaming_to_field").val($("#rename_field").val())})}});Gollum={encloseStrategy:function(a,d,b){return{type:"enclose",content:d,prefix:a,suffix:b}},prefixStrategy:function(a,d,b){return{type:"prefixLine",prefix:a,content:d,newline:b}},enclose:function(a,d,b){d=Gollum.Formats[d][b];b=a.getSelectionRange();if(b.start==b.end){a.insertText(d.prefix+d.content+d.suffix,b.start,b.start,false);a.setSelectionRange(b.start+d.prefix.length,b.start+d.prefix.length+d.content.length)}else a.insertText(d.prefix+a.getSelectedText()+d.suffix,b.start,b.end,false)},prefix:function(a,
d,b){d=Gollum.Formats[d][b];b=a.getSelectionRange();var c=a.getSelectedText(),e=d.prefix;if(d.newline){a.setSelectionRange(b.start-1,b.start);var f=a.getSelectedText();if(f!="\n")e="\n"+e}if(b.start==b.end){a.insertText(e+d.content,b.start,b.start,false);a.setSelectionRange(b.start+e.length,b.start+e.length+d.content.length)}else a.insertText(e+c+"\n",b.start,b.end,false)}};
Gollum.Formats={asciidoc:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy(". ","Numbered list item",true)},creole:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("//","italic text","//"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)},gollum:{link:Gollum.encloseStrategy("[[",
"Page Name","]]"),image:Gollum.encloseStrategy("[[","/path/to/image.png","]]")},markdown:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},org:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("/","italic text","/"),ul:Gollum.prefixStrategy("- ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ",
"Numbered list item",true)},pod:{bold:Gollum.encloseStrategy("B<","bold text",">"),italic:Gollum.encloseStrategy("I<","italic text",">"),ul:Gollum.prefixStrategy("=item * ","Bullet list item",true),ol:Gollum.prefixStrategy("=item 1. ","Numbered list item",true)},rest:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},rdoc:{bold:Gollum.encloseStrategy("*",
"bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},textile:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)}};
$(function(){$("#editbar .link").click(function(){var b=$("#guides .write textarea");d();Gollum.enclose(b,"gollum","link")});$("#editbar .image").click(function(){var b=$("#guides .write textarea");d();Gollum.enclose(b,"gollum","image")});$("#editbar .bold").click(function(){var b=$("#guides .write textarea"),c=$("#guides .write select#wiki_format option:selected").attr("value");Gollum.enclose(b,c,"bold")});$("#editbar .italic").click(function(){var b=$("#guides .write textarea"),c=d();Gollum.enclose(b,
c,"italic")});$("#editbar .ul").click(function(){var b=$("#guides .write textarea"),c=d();Gollum.prefix(b,c,"ul")});$("#editbar .ol").click(function(){var b=$("#guides .write textarea"),c=d();Gollum.prefix(b,c,"ol")});$("#editbar .tab.help a").click(function(){if($(this).hasClass("open")){$(this).removeClass("open");$("#editbar .sections").slideUp()}else{$(this).addClass("open");if(!$("#editbar .sections .toc .current").get(0)){var b=$("#editbar .sections .toc .headers").get(0);a.call(b)}$("#editbar .sections").slideDown()}return false});
$("#guides .write select#wiki_format").change(function(){var b=$("#editbar .sections .toc div.current").get(0);a.call(b)});function a(){$("#editbar .sections .toc div").removeClass("current");$(this).addClass("current");$("#editbar .sections .page").removeClass("current");var b=$(this).attr("class").split(" ");b=b[0];var c=d();$(this).hasClass("gollum")?$("#editbar .sections .page."+b).addClass("current"):$("#editbar .sections .page."+b+"."+c).addClass("current");return false}function d(){return $("#guides .write select#wiki_format option:selected").val()}
$("#editbar .sections .toc div").click(a)});$(function(){$(".ejection").each(function(){var a=$(this),d=a.find(".confirming"),b=a.find(".ejecting").hide();d.find("button, .button").click(function(){d.hide();b.show();return false});b.find(".cancel").click(function(){b.hide();d.show();return false})})});GitHub.Fluid={init:function(){if(window.fluid){GitHub.Fluid.setDockCount();GitHub.Fluid.addMenuItems()}},setDockCount:function(){if(window.fluid.dockBadge)window.fluid.dockBadge=$(".inbox strong a").text()},addMenuItems:function(){with(GitHub.Fluid){addDockJump("My Account","/account");addDockJump("News","/news");addDockJump("Repositories","/repositories");addDockJump("Popular Watched","/popular/watched");addDockJump("Popular Forked","/popular/forked")}},addDockJump:function(a,d){window.fluid.addDockMenuItem&&
window.fluid.addDockMenuItem(a,function(){window.location="http://github.com"+d})}};$(GitHub.Fluid.init);$(function(){$("#forkqueue #head-sha").text();$("#forkqueue .untested:first").each(function(){a()});function a(){var c=$("#forkqueue .untested").length,e=$("#head-sha").text();if(c>0){var f=$("#forkqueue .untested:first");c=f.attr("name");$(".icons",f).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.get("forkqueue/applies/"+e+"/"+c,function(g){f.removeClass("untested");if(g=="NOPE"){f.addClass("unclean");$(".icons",f).html("")}else if(g=="YUP"){f.addClass("clean");$(".icons",
f).html("")}else $(".icons",f).html("err");a()})}}$(".action-choice").change(function(){var c=$(this).attr("value");if(c=="ignore"){c=$(this).parents("form").contents().find("input:checked");c.each(function(e,f){e=$(f).attr("ref");$(f).parents("tr").children(".icons").html("ignoring...");$.post("forkqueue/ignore/"+e,{});$(f).parents("tr").fadeOut("normal",function(){$(this).remove()})})}else if(c=="apply"){c=$(this).parents("form");c.submit()}$(this).children(".default").attr("selected",1)});var d=
[];$("#forkqueue input[type=checkbox]").click(function(c){var e=$(this).attr("class").match(/^r-(\d+)-(\d+)$/),f=parseInt(e[1]);e=parseInt(e[2]);if(c.shiftKey&&d.length>0){c=d[d.length-1];var g=c.match(/^r-(\d+)-(\d+)$/);c=parseInt(g[1]);g=parseInt(g[2]);if(f==c){c=$(this).attr("checked")==true;g=[e,g].sort();e=g[0];g=g[1];for(e=e;e<g;e++)c==true?$("#forkqueue input.r-"+f+"-"+e).attr("checked","true"):$("#forkqueue input.r-"+f+"-"+e).removeAttr("checked")}}d.push($(this).attr("class"))});$("#forkqueue a.select_all").click(function(){$(this).removeClass("select_all");
var c=$(this).attr("class");$(this).addClass("select_all");$("#forkqueue tr."+c+" input[type=checkbox]").attr("checked","true");d=[];return false});$("#forkqueue a.select_none").click(function(){$(this).removeClass("select_none");var c=$(this).attr("class");$(this).addClass("select_none");$("#forkqueue tr."+c+" input[type=checkbox]").removeAttr("checked");d=[];return false});$("table#queue tr.not-applied:first").each(function(){b()});$("#change-branch").click(function(){$("#int-info").hide();$("#int-change").show();
return false});$("#change-branch-nevermind").click(function(){$("#int-change").hide();$("#int-info").show();return false});function b(){var c=$("table#queue tr.not-applied").length,e=$("#head-sha").text();if(c>0){var f=$("#total-commits").text();$("#current-commit").text(f-c+1);var g=$("table#queue tr.not-applied:first");c=g.attr("name");$(".date",g).html("applying");$(".icons",g).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.post("patch/"+e+"/"+c,function(h){g.removeClass("not-applied");
if(h=="NOPE"){g.addClass("unclean_failure");$(".date",g).html("failed");$(".icons",g).html('<img src="/images/icons/exclamation.png" alt="Failed" />')}else{$("#head-sha").text(h);g.addClass("clean");$(".date",g).html("applied");$(".apply-status",g).attr("value","1");$(".icons",g).html('<img src="/images/modules/dashboard/news/commit.png" alt="Applied" />')}b()})}else{$("#new-head-sha").attr("value",e);$("#finalize").show()}}$(".js-fq-new-version").each(function(){var c=$("#fq-repo").text();console.log("repo:",
c);var e=$(this).hasClass("reload");$.smartPoller(function(f){$.getJSON("/cache/network_current/"+c,function(g){if(g&&g.current){e&&window.location.reload(true);$(".js-fq-polling").hide();$(".js-fq-new-version").show()}else f()})})})});$(function(){if($(".business .logos").length>0){var a=[["Shopify","shopify.png","http://shopify.com/"],["CustomInk","customink.png","http://customink.com/"],["Pivotal Labs","pivotallabs.png","http://pivotallabs.com/"],["FiveRuns","fiveruns.png","http://fiveruns.com/"],["PeepCode","peepcode.png","http://peepcode.com/"],["Frogmetrics","frogmetrics.png","http://frogmetrics.com/"],["Upstream","upstream.png","http://upstream-berlin.com/"],["Terralien","terralien.png","http://terralien.com/"],["Planet Argon",
"planetargon.png","http://planetargon.com/"],["Tightrope Media Systems","tightropemediasystems.png","http://trms.com/"],["Rubaidh","rubaidh.png","http://rubaidh.com/"],["Iterative Design","iterativedesigns.png","http://iterativedesigns.com/"],["GiraffeSoft","giraffesoft.png","http://giraffesoft.com/"],["Evil Martians","evilmartians.png","http://evilmartians.com/"],["Crimson Jet","crimsonjet.png","http://crimsonjet.com/"],["Alonetone","alonetone.png","http://alonetone.com/"],["EntryWay","entryway.png",
"http://entryway.net/"],["Fingertips","fingertips.png","http://fngtps.com/"],["Run Code Run","runcoderun.png","http://runcoderun.com/"],["Be a Magpie","beamagpie.png","http://be-a-magpie.com/"],["Rocket Rentals","rocketrentals.png","http://rocket-rentals.de/"],["Connected Flow","connectedflow.png","http://connectedflow.com/"],["Dwellicious","dwellicious.png","http://dwellicious.com/"],["Assay Depot","assaydepot.png","http://www.assaydepot.com/"],["Centro","centro.png","http://www.centro.net/"],["Debuggable Ltd.",
"debuggable.png","http://debuggable.com/"],["Blogage.de","blogage.png","http://blogage.de/"],["ThoughtBot","thoughtbot.png","http://www.thoughtbot.com/"],["Viget Labs","vigetlabs.png","http://www.viget.com/"],["RateMyArea","ratemyarea.png","http://www.ratemyarea.com/"],["Abloom","abloom.png","http://abloom.at/"],["LinkingPaths","linkingpaths.png","http://www.linkingpaths.com/"],["MIKAMAI","mikamai.png","http://mikamai.com/"],["BEKK","bekk.png","http://www.bekk.no/"],["Reductive Labs","reductivelabs.png",
"http://www.reductivelabs.com/"],["Sexbyfood","sexbyfood.png","http://www.sexbyfood.com/"],["Factorial, LLC","yfactorial.png","http://yfactorial.com/"],["SnapMyLife","snapmylife.png","http://www.snapmylife.com/"],["Scrumy","scrumy.png","http://scrumy.com/"],["TinyMassive","tinymassive.png","http://www.tinymassive.com/"],["SOCIALTEXT","socialtext.png","http://www.socialtext.com/"],["All-Seeing Interactive","allseeinginteractive.png","http://allseeing-i.com/"],["Howcast","howcast.png","http://www.howcast.com/"],
["Relevance Inc","relevance.png","http://thinkrelevance.com/"],["Nitobi Software Inc","nitobi.png","http://www.nitobi.com/"],["99designs","99designs.png","http://99designs.com/"],["EdgeCase, LLC","edgecase.png","http://edgecase.com"],["Plinky","plinky.png","http://www.plinky.com/"],["One Design Company","onedesigncompany.png","http://onedesigncompany.com/"],["CollectiveIdea","collectiveidea.png","http://collectiveidea.com/"],["Stateful Labs","statefullabs.png","http://stateful.net/"],["High Groove Studios",
"highgroove.png","http://highgroove.com/"],["Exceptional","exceptional.png","http://www.getexceptional.com/"],["DealBase","dealbase.png","http://www.dealbase.com/"],["Silver Needle","silverneedle.png","http://silverneedlesoft.com/"],["No Kahuna","nokahuna.png","http://nokahuna.com/"],["Double Encore","doubleencore.png","http://www.doubleencore.com/"],["Yahoo","yahoo.gif","http://yahoo.com/"],["EMI Group Limited","emi.png","http://emi.com/"],["TechCrunch","techcrunch.png","http://techcrunch.com/"],
["WePlay","weplay.png","http://weplay.com/"]],d=function(){var b=$(".business .logos table");$.each(a,function(g,h){b.append('<tr><td><a href="'+h[2]+'" rel="nofollow"><img src="http://assets'+g%4+".github.com/images/modules/home/customers/"+h[1]+'" alt="'+h[0]+'" /></a></td></tr>')});parseInt($(".business .slide").css("top"));var c=$(".business .logos td").length-4,e=0;function f(){e+=1;var g=parseInt($(".business .slide").css("top"));if(Math.abs(g+c*75)<25){$(".business .slide").css("top",0);e=
0}else $(".business .slide").animate({top:"-"+e*75+"px"},1500)}setInterval(f,3000)};setTimeout(d,1000)}});$(function(){var a={success:function(){$.smartPoller(3000,function(d){$.getJSON($("#new_import").attr("action")+"/grab_authors",{},function(b){if(b==false)return d();if(b.length==0){$("#new_import input[type=submit]").attr("disabled","").val("Import SVN Authors").show();alert("No authors were returned, please try a different URL")}else{$.each(b,function(c,e){c=$('<tr><td><input type="text" readonly="readonly" value="'+e+'" name="svn_authors[]" /></td><td><input type="text" class="git_author" name="git_authors[]"/></td></tr>');
c.appendTo("#authors-list")});$("#import-submit").show()}$("#wait").slideUp();$("#import_repo").show();$("#author_entry").slideDown()})})},beforeSubmit:function(d,b){d=$("#svn_url").val();if(!d.match(/^https?:\/\//)&&!d.match(/^svn:\/\//)){alert("Please enter a valid subversion url");return false}b.find("input[type=submit]").hide();$("#authors").slideDown()}};$("#new_import").ajaxForm(a);$("#import-submit").click(function(){$(this).attr("disabled","disabled");var d=false,b=$("#authors-list input.git_author[value=]").size(),
c=$("#authors-list input.git_author").size()-b;if(b>0&&c>0){alert("You must either fill in all author names or none.");d=true}$("#authors-list input.git_author").each(function(){var e=$(this).val();if(!d&&e!=""&&!/^[^<]+<[^>]+>$/.test(e)){alert("'"+e+"' is not a valid git author.  Authors must match the format 'User Name <user@domain>'");d=true}});if(d){$("#import-submit").attr("disabled","");return false}else $("form#new_repository").submit()})});$(function(){$(".cancel-compose").click(function(){window.location="/inbox";return false});$("#inbox .del a").click(function(){var a=$(this),d=a.parents(".item"),b=d.attr("data-type")=="message"?"inbox":"notification",c=".js-"+b+"-count";a.find("img").attr("src",GitHub.Ajax.spinner);$.ajax({type:"DELETE",url:a.attr("rel"),error:function(){a.find("img").attr("src",GitHub.Ajax.error)},success:function(){if(d.is(".unread")){var e=parseInt($(c+":first").text());if(e>0)$(c).text(e-=1);e==0&&$(c).each(function(){var f=
$(this);if(f.is(".new"))f.removeClass("new");else f.parent().is(".new")&&f.parent().removeClass("new")})}d.remove()}});return false});$("#reveal_deleted").click(function(){$(this).parent().hide();$(".hidden_message").show();return false})});$(function(){$("#impact_graph").length>0&&GitHub.ImpactGraph.drawImpactGraph()});
GitHub.ImpactGraph={colors:null,data:null,chunkVerticalSpace:2,initColors:function(a){seedColors=[[222,0,0],[255,141,0],[255,227,0],[38,198,0],[0,224,226],[0,33,226],[218,0,226]];this.colors=[];var d=0;for(var b in a){var c=seedColors[d%7];if(d>6)c=[this.randColorValue(c[0]),this.randColorValue(c[1]),this.randColorValue(c[2])];this.colors.push(c);d+=1}},drawImpactGraph:function(){var a={},d=$("#impact_graph").attr("rel"),b=this;$.smartPoller(function(c){$.getJSON("/"+d+"/graphs/impact_data",function(e){if(e&&
e.authors){b.initColors(e.authors);var f=b.createCanvas(e);e=b.padChunks(e);b.data=e;$.each(e.buckets,function(g,h){b.drawBucket(a,h,g)});b.drawAll(f,e,a);b.authorHint()}else c()})})},createCanvas:function(a){var d=a.buckets.length*50*2-50,b=0;for(var c in a.buckets){var e=a.buckets[c],f=0;for(var g in e.i){var h=e.i[g];f+=this.normalizeImpact(h[1])+this.chunkVerticalSpace}if(f>b)b=f}$("#impact_graph div").remove();a=$("#impact_graph");a.height(b+50).css("border","1px solid #aaa");$("#caption").show();
a.append('<canvas width="'+d+'" height="'+(b+30)+'"></canvas>');d=$("#impact_graph canvas")[0];return d.getContext("2d")},padChunks:function(a){for(var d in a.authors){var b=this.findFirst(d,a),c=this.findLast(d,a);for(b=b+1;b<c;b++)this.bucketHasAuthor(a.buckets[b],d)||a.buckets[b].i.push([d,0])}return a},bucketHasAuthor:function(a,d){for(var b=0;b<a.i.length;b++)if(a.i[b][0]==parseInt(d))return true;return false},findFirst:function(a,d){for(var b=0;b<d.buckets.length;b++)if(this.bucketHasAuthor(d.buckets[b],
a))return b},findLast:function(a,d){for(var b=d.buckets.length-1;b>=0;b--)if(this.bucketHasAuthor(d.buckets[b],a))return b},colorFor:function(a){a=this.colors[a];return"rgb("+a[0]+","+a[1]+","+a[2]+")"},randColorValue:function(a){var d=Math.round(Math.random()*100)-50;a=a+d;if(a>255)a=255;if(a<0)a=0;return a},drawBucket:function(a,d,b){var c=0,e=this;$.each(d.i,function(f,g){f=g[0];var h=e.normalizeImpact(g[1]);a[f]||(a[f]=[]);a[f].push([b*100,c,50,h,g[1]]);c=c+h+e.chunkVerticalSpace})},normalizeImpact:function(a){return a<=
9?a+1:a<=5000?Math.round(10+a/50):Math.round(100+Math.log(a)*10)},drawAll:function(a,d,b){this.drawStreams(a,b,null);this.drawDates(d)},drawStreams:function(a,d,b){a.clearRect(0,0,10000,500);$(".activator").remove();for(var c in d)c!=b&&this.drawStream(c,d,a,true);b!=null&&this.drawStream(b,d,a,false)},drawStream:function(a,d,b,c){b.fillStyle=this.colorFor(a);chunks=d[a];for(var e=0;e<chunks.length;e++){var f=chunks[e];b.fillRect(f[0],f[1],f[2],f[3]);c&&this.placeActivator(a,d,b,f[0],f[1],f[2],f[3],
f[4]);if(e!=0){b.beginPath();b.moveTo(previousChunk[0]+50,previousChunk[1]);b.bezierCurveTo(previousChunk[0]+75,previousChunk[1],f[0]-25,f[1],f[0],f[1]);b.lineTo(f[0],f[1]+f[3]);b.bezierCurveTo(f[0]-25,f[1]+f[3],previousChunk[0]+75,previousChunk[1]+previousChunk[3],previousChunk[0]+50,previousChunk[1]+previousChunk[3]);b.fill()}previousChunk=f}},drawStats:function(a,d){chunks=d[a];for(a=0;a<chunks.length;a++){d=chunks[a];var b=d[4];b>10&&this.drawStat(b,d[0],d[1]+d[3]/2)}},drawStat:function(a,d,b){var c=
"";c+="position: absolute;";c+="left: "+d+"px;";c+="top: "+b+"px;";c+="width: 50px;";c+="text-align: center;";c+="color: #fff;";c+="font-size: 9px;";c+="z-index: 0;";$("#impact_graph").append('<p class="stat" style="'+c+'">'+a+"</p>")},drawDate:function(a,d,b){b+=3;var c="";c+="position: absolute;";c+="left: "+d+"px;";c+="top: "+b+"px;";c+="width: 50px;";c+="text-align: center;";c+="color: #888;";c+="font-size: 9px;";$("#impact_graph").append('<p style="'+c+'">'+a+"</p>")},placeActivator:function(a,
d,b,c,e,f,g){e+=5;var h="";h+="position: absolute;";h+="left: "+c+"px;";h+="top: "+e+"px;";h+="width: "+f+"px;";h+="height: "+g+"px;";h+="z-index: 100;";h+="cursor: pointer;";c="a"+c+"-"+e;$("#impact_graph").append('<div class="activator" id="'+c+'" style="'+h+'">&nbsp;</div>');var i=this;$("#"+c).mouseover(function(l){$(l.target).css("background-color","black").css("opacity","0.08");i.drawAuthor(a)}).mouseout(function(l){$(l.target).css("background-color","transparent");i.clearAuthor();i.authorHint()}).mousedown(function(){$(".stat").remove();
i.clearAuthor();i.drawStreams(b,d,a);i.drawStats(a,d);i.drawSelectedAuthor(a);i.authorHint()})},drawDates:function(a){var d=this;$.each(a.buckets,function(b,c){var e=0;$.each(c.i,function(h,i){e+=d.normalizeImpact(i[1])+1});var f=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],g=new Date;g.setTime(c.d*1000);c=""+g.getDate()+" "+f[g.getMonth()]+" "+g.getFullYear();d.drawDate(c,b*100,e+7)})},authorText:function(a,d,b){var c=null;c=b<25?"selected_author_text":"author_text";
var e="";e+="position: absolute;";e+="left: "+d+"px;";e+="top: "+b+"px;";e+="width: 920px;";e+="color: #444;";e+="font-size: 18px;";$("#impact_legend").append('<p id="'+c+'" style="'+e+'">'+a+"</p>")},authorHint:function(){this.authorText('<span style="color: #aaa;">mouse over the graph for more details</span>',0,30)},drawAuthor:function(a){this.clearAuthor();var d=$("#impact_legend canvas")[0].getContext("2d");d.fillStyle=this.colorFor(a);d.strokeStyle="#888888";d.fillRect(0,30,20,20);d.strokeRect(0.5,
30.5,19,19);a=this.data.authors[a].n;this.authorText(a+' <span style="color: #aaa;">(click for more info)</span>',25,30)},drawSelectedAuthor:function(a){this.clearSelectedAuthor();var d=$("#impact_legend canvas")[0].getContext("2d");d.fillStyle=this.colorFor(a);d.strokeStyle="#000000";d.fillRect(0,0,20,20);d.strokeRect(0.5,0.5,19,19);var b=this.data.authors[a];a=b.n;d=b.c;var c=b.a;b=b.d;this.authorText(a+" ("+d+" commits, "+c+" additions, "+b+" deletions)",25,0)},clearAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");
a.clearRect(0,30,920,20);$("#author_text").remove()},clearSelectedAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");a.clearRect(0,0,920,20);$("#selected_author_text").remove()}};GitHub.Issues={active:null,repoURL:null,list:[],currentListHash:"list",init:function(){var a,d,b=window.location.pathname,c=window.location.hash;GitHub.Issues.repoURL=b.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";if(c&&(d=c.match(/sort=(\w+)/)))setTimeout(function(){$("#sort_by_"+d[1]).click()},100);if(GitHub.Issues.showOnLoad){GitHub.Issues.showIssueWithoutSettingHash(GitHub.Issues.showOnLoad);$("#issues .loading").hide();$("#issues #issue_list").show()}else if(c&&(a=c.match(/issue\/(\d+)/))){var e;
if(c=c.match(/comment\/(\d+)/))e=c[1];if($("#issue_"+a[1]).size()==0){b=b.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";b=b+a[1]+"/find";if(e)b=b+"?comment="+e;window.location=b;return false}GitHub.Issues.showIssue(a[1]);$("#issues .loading").hide();$("#issues #issue_list").show();e&&GitHub.Issues.adjustViewForComment(e)}else{$("#issues #issue_list .issue").show();$("#issues .loading").hide();$("#issues #issue_list").show();GitHub.Issues.adjustViewForTarget()}GitHub.Issues.Dragger.updateHandles();GitHub.Issues.Nav.init()},
adjustViewForComment:function(a){a=$("#comment_"+a);a.size()&&a.scrollTo(10)},toggleCreateIssueForm:function(){$(".create_issue").hasClass("disabled")?this.hideCreateIssueForm():this.showCreateIssueForm()},showCreateIssueForm:function(){if(!$("#new_issue").is(":visible")){$("#new_issue").show().find("input[type=text]").val("").focus();$("#issues .display .empty").hide();$("#issues .display .sortbar").hide();$("#issue_list").hide();$("#action_list").hide();$(".create_issue img").attr("src","/images/modules/issues/create_issue_disabled_button.png");
$(".create_issue").addClass("disabled")}},hideCreateIssueForm:function(){if(!$("#new_issue").is(":hidden")){$("#new_issue").hide();$("#issues .display .empty").show();$("#issues .display .sortbar").show();$("#issue_list").show();$("#action_list").show();$(".create_issue img").attr("src","/images/modules/issues/create_issue_button.png");$(".create_issue").removeClass("disabled")}},ajaxifyEditIssueForm:function(a){var d=$(a).parents(".issue:first");a.ajaxForm({type:"PUT",dataType:"json",success:function(b){d.find(".issue_title").html(b.title);
d.find(".body:first").html(b.body);GitHub.Issues.hideEditIssueForm()}});a.addClass("ajaxified")},showEditIssueForm:function(){var a=$("#issue_"+this.active),d=a.find(".edit_issue");d.is(":not(.ajaxified)")&&this.ajaxifyEditIssueForm(d);a.find(".meta").hide();a.find(".details").hide();d.show()},hideEditIssueForm:function(){var a=$("#issue_"+this.active);a.find(".meta").show();a.find(".details").show();a.find(".edit_issue").hide()},showEditCommentForm:function(a){a.find("form").is(":not(.ajaxified)")&&
this.ajaxifyEditCommentForm(a);a.find(".body, form").toggle()},ajaxifyEditCommentForm:function(a){var d=a.find("form"),b=a.find(".body");d.ajaxForm({type:"PUT",dataType:"json",success:function(c){b.html(c.body);GitHub.Issues.hideEditCommentForm(a)}});d.addClass("ajaxified")},hideEditCommentForms:function(){var a=$("#issue_"+this.active);a.find(".body").show();a.find(".edit_issue_comment_form").hide()},hideEditCommentForm:function(a){a.find(".body").show();a.find("form").hide()},validateComment:function(a){a=
$(a);if(a.find("textarea").val().replace(/\s+$/,"").match(/.+/))return true;else{var d=a.find(".status");d.text("Comment must not be empty").show();setTimeout(function(){d.fadeOut("normal")},3000);return false}},disableSortable:function(){GitHub.Issues.collab&&$("#issues").removeClass("collab")},enableSortable:function(){GitHub.Issues.collab&&$("#issues").addClass("collab")},showIssue:function(a){GitHub.Issues.showIssueWithoutSettingHash(a);GitHub.Issues.Nav.setHash("issue/"+a)},showIssueWithoutSettingHash:function(a){GitHub.Issues.active=
a;$("#issues .display .sortbar").hide();$("#issues .ajax_paginate").hide();var d=null;$("#issues .display .list .issue").each(function(){var b=$(this);if(b.attr("id")=="issue_"+a){b.addClass("active");b.show();d=b}else b.hide()});this.targetNone();d.removeClass("closed").addClass("open");d.find(".details").css("display","block");d.find(".info .actions").show();if(github_user!=null){GitHub.Issues.collab&&d.find(".label .remove").show();if(!d.hasClass("read")){d.addClass("read");GitHub.Issues.decrementUnreadCount();
$.post(this.repoURL+a+"/read",{})}}$("#issues .admin .back_link").show().parent().find(".selectors").hide();GitHub.Issues.adjustViewForTarget()},markAsRead:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var d=a.attr("id").split("_")[1];if(!a.hasClass("read")){a.addClass("read");$.post(this.repoURL+d+"/read",{})}GitHub.Issues.decrementUnreadCount()},markAsUnread:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var d=a.attr("id").split("_")[1];if(a.hasClass("read")){a.removeClass("read");$.post(this.repoURL+
d+"/unread",{})}GitHub.Issues.incrementUnreadCount()},changeUnreadCount:function(a){var d=$("#unread_count").text();a=(d=d.match(/\((\d+)\)/))?parseInt(d[1])+a:a<0?0:1;a==0?$("#unread_count").text(""):$("#unread_count").text("("+a+")")},decrementUnreadCount:function(){this.changeUnreadCount(-1)},incrementUnreadCount:function(){this.changeUnreadCount(1)},changeOpenCount:function(a){var d=$(".repohead ul.tabs li a.selected").text();d=d.match(/Issues \((\d+)\)/);a=parseInt(d[1])+a;$(".repohead ul.tabs li a.selected").text("Issues ("+
a+")");a==0?$("#open_count").text(""):$("#open_count").text("("+a+")")},decrementOpenCount:function(){this.changeOpenCount(-1)},incrementOpenCount:function(){this.changeOpenCount(1)},hideIssue:function(){this.hideCreateIssueForm();this.hideEditCommentForms();this.hideEditIssueForm();this.targetIssue(this.active);GitHub.Issues.active=null;GitHub.Issues.Nav.setHash(GitHub.Issues.listHash());$("#issues .display .sortbar").show();$("#issues .ajax_paginate").show();$("#issues .admin .back_link").hide().parent().find(".selectors").show();
var a=$("#issues .display .list .active");a.find(".label .remove").hide();a.find(".details").hide();a.find(".info .actions").hide();a.removeClass("open").addClass("closed").removeClass("active");$("#issues #issue_list .issue").show();GitHub.Issues.adjustViewForTarget()},openIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var d=$("#issue_"+a);GitHub.Issues.target()[0].id==d[0].id&&GitHub.Issues.targetNext();d.remove();GitHub.Issues.incrementOpenCount();$.post(GitHub.Issues.repoURL+
a+"/open",{})},closeIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var d=$("#issue_"+a);GitHub.Issues.target()[0].id==d[0].id&&GitHub.Issues.targetNext();d.remove();GitHub.Issues.decrementOpenCount();$.post(GitHub.Issues.repoURL+a+"/close",{})},moveIssueToTop:function(a){a=$("#issue_"+a);var d={target:a};GitHub.Issues.Dragger.startDrag(d);a.remove();$("#issue_list").prepend(a);a.find(".meta").click(GitHub.Issues.issueRowClickHandler);a.find(".top.handle").click(GitHub.Issues.issueRowClickHandler);
GitHub.Issues.Dragger.stopDrag(d)},issueRowClickHandler:function(a){a=$(a.target);var d=a.is(".issue")?a:a.parents(".issue");d=d.attr("id").split("_")[1];if(a.is(".top")||a.parents(".top").length>0){GitHub.Issues.moveIssueToTop(d);return false}if(a.is(":input")||a.is("a:not(.issue_title)"))return true;GitHub.Issues.showIssue(d);return false},createIssue:function(){$(".create_issue:first").click()},createLabel:function(){$(".create_label").click()},backToInbox:function(){if(GitHub.Issues.active){var a=
$("#open_issues_link").attr("href");if(window.location.pathname==a){$(".back_link").click();/sort=/.test(window.location.hash)&&$("#sort_by_priority").click()}else window.location=a}},backToIssues:function(){GitHub.Issues.active&&$(".back_link").click()},markSelectedAsRead:function(){$(".selected").each(function(){GitHub.Issues.markAsRead($(this))})},markSelectedAsUnread:function(){$(".selected").each(function(){GitHub.Issues.markAsUnread($(this))})},closeSelected:function(){$("#issues #action_list").get(0).selectedIndex=
1;$("#issues #action_list").change()},removeLabelFromSelected:function(){console.log("not implemented")},removeSelectedFromView:function(){/\/labels\//.test(location.pathname)?GitHub.Issues.removeLabelFromSelected():GitHub.Issues.closeSelected()},targetNext:function(){var a=GitHub.Issues.target();a.next().length>0?a.next().addClass("target"):a.prev().addClass("target")},targetIssue:function(a){this.targetNone();$("#issue_"+a).addClass("target")},targetNone:function(){GitHub.Issues.target().removeClass("target")},
targetFirst:function(){this.targetNone();$(".issue:first").addClass("target")},moveTargetDown:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).next();if(a.size()){a.addClass("target");GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li.issue").not(":last").filter(".target").removeClass("target").next().addClass("target");GitHub.Issues.adjustViewForTarget()}},moveTargetUp:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).prev();
if(a.size()){a.addClass("target");GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li").not(":first").filter(".target").removeClass("target").prev().addClass("target");GitHub.Issues.adjustViewForTarget()}},adjustViewForTarget:function(){var a=GitHub.Issues.target();if(a.offset())if(a.offset().top-$(window).scrollTop()+20>$(window).height())a.scrollTo(10);else a.offset().top-$(window).scrollTop()<0&&$("html,body").animate({scrollTop:a.offset().top-$(window).height()},
10)},showTarget:function(){GitHub.Issues.showIssue(GitHub.Issues.target().attr("id").split("_")[1])},toggleSelectTarget:function(){var a=GitHub.Issues.target().find(":checkbox");a.attr("checked")?a.attr("checked",false):a.attr("checked",true);a.change()},target:function(){return $(".target")},focusIssuesSearch:function(){$("#issues .searchbar").focus()},showHotkeyHelp:function(){if(GitHub.Issues.keyboardShortcuts)return $.facebox(GitHub.Issues.keyboardShortcuts);$.facebox(function(){$.get("/javascripts/github/issues.js",
function(a){var d=[],b="";a=a.replace(/[\s\S]*hotkeys\({([\s\S]+?)}\)[\s\S]*/mg,"$1");$.each(a.split("\n"),function(c,e){e=e.replace(/[\':,]/g,"");e=e.replace("GitHub.Issues.","");if(e=$.trim(e)){e=e.split(" ");b=e[1].replace(/([A-Z])/g," $1").toLowerCase();b=b.slice(0,1).toUpperCase()+b.slice(1,b.length);d.push("  "+e[0]+" "+b)}});GitHub.Issues.keyboardShortcuts="<h2>Keyboard Shortcuts</h2><pre>"+d.join("\n")+"</pre>";$.facebox(GitHub.Issues.keyboardShortcuts)})})},addLabels:function(a,d,b){for(var c,
e=[],f=0;f<a.length;f++){var g=a[f];c="issue_"+g+"_label_"+d;if($("#"+c).size()==0){var h="";h+='<div id="'+c+'" class="label label'+d+'">';h+='  <div class="labeli">';h+='    <div class="name">';h+="      <span>"+b+"</span>";h+='      <div class="remove" style="display: none;">x</div>';h+="    </div>";h+="  </div>";h+="</div>";h=$(h);$("#issue_"+g+" .issue_title").before(h);if(c=labels["label"+d])GitHub.Issues.Labels.setLabelColors(h,c);GitHub.Issues.active!=null&&$("#issue_"+g+" .label .remove").show();
e.push(g)}}e.length>0&&$.post($("#new_label").attr("action")+"/"+d+"/append",{issues:e.join(",")})},selected:function(){var a=[];return a=GitHub.Issues.active!=null?[""+GitHub.Issues.active]:$("#issues .list").find("input:checked").serializeArray().map(function(d){return d.value})},setListHash:function(a){GitHub.Issues.currentListHash=a;GitHub.Issues.Nav.setHash(a)},listHash:function(){return GitHub.Issues.currentListHash},find:function(a){a=parseInt(a);var d=$.grep(GitHub.Issues.list,function(b){return b.id==
a});return d[0]}};GitHub.Issues.Issue=function(a,d,b,c){this.id=a;this.priority=d;this.updated=c;this._votes=b;GitHub.Issues.list.push(this)};
GitHub.Issues.Issue.prototype={element:function(){return $("#issue_"+this.id)},addVote:function(){this.setVotes(this.votes()+1)},removeVote:function(){this.setVotes(this.votes()-1)},votes:function(){return this._votes},setVotes:function(a){a=parseInt(a);var d=a+" vote",b=a>this._votes,c=b?"/vote":"/unvote";this._votes=a;this.element().find(".vote .show").text(d+(a==1?"":"s"));d=this.element().find(".voting_box .act a");b?d.removeClass("enabled").find("img").attr("src","/images/modules/issues/upvote_disabled.png"):
d.addClass("enabled").find("img").attr("src","/images/modules/issues/upvote.png");$.post(GitHub.Issues.repoURL+this.id+c,{});return a}};
GitHub.Issues.Dragger={dragging:0,startingPosition:-1,sortDrag:function(a){if(this.dragging<5){$(a.target).parents(".issue").addClass("floating");this.dragging+=1}},startDrag:function(a){if(/labels/.test(location.pathname)){a=$(a.target);a=a.is("li")?a:a.parents("li");var d=$.makeArray($("#issue_list li"));this.startingPosition=$.inArray(a[0],d)}},stopDrag:function(a){var d,b=[];$("#issues .display .list .issue").removeClass("floating");if(this.startingPosition>-1){var c=GitHub.Issues.repoURL+"sort_label",
e={actor:null,neighbor:null,direction:null};a=$(a.target);a=a.is("li")?a:a.parents("li");var f=$.map($("#issue_list li"),function(h){return h.id}),g=$.inArray(a[0].id,f);e.direction=g>this.startingPosition?"down":"up";e.neighbor=e.direction=="up"?f[g+1]:f[g-1];e.neighbor=e.neighbor.split("_")[1];e.actor=a[0].id.split("_")[1]}else{c=GitHub.Issues.repoURL+"sort";e={sorting:null};$("#issue_list>li").each(function(h){d=this.id.split("_")[1];GitHub.Issues.find(d).priority=h;b.push(d)});e.sorting=b.join(",")}GitHub.Issues.Dragger.updateHandles();
$.post(c,e);this.dragging=0},updateHandles:function(){$("#issue_list .handles .top.handle").show();$("#issue_list .handles .top.handle:first").hide()}};
GitHub.Issues.Labels={init:function(){},sortedLabelInsert:function(a,d){d=d==undefined?"":"label"+d;var b=GitHub.Issues.repoURL+"labels/"+a,c="";c+="<li>";c+='  <div rel="'+d+'" class="label dropdown '+d+'">';c+='    <div class="labeli">';c+='      <div class="name">';c+="        <span>&#9662;</span>";c+="      </div>";c+="    </div>";c+="  </div>";c+='  <a href="'+b+'">'+a+"</a>";c+="</li>";var e=$(c),f=false;d=$(".labels .list li");d.each(function(g,h){g=$(h).find("a").text();if(!f&&a<g){$(h).before(e);
f=true}});f||$(".labels .list").append(e)},setLabelColors:function(a,d){var b=GitHub.Color.hex2rgb(d);d=GitHub.Color.rgb2hsb(b);var c=null;c=d.b<50?{h:d.h,s:d.s,b:d.b*1.4}:{h:d.h,s:d.s,b:d.b*0.8};var e=null;e=d.b<50?{h:d.h,s:d.s,b:d.b*1.8}:{h:d.h,s:d.s,b:d.b*0.4};a.css("backgroundColor",GitHub.Color.rgb2hex(b));var f="white";if(d.b>60&&d.s<40||d.b>70&&d.h>30&&d.h<200)f="black";a.css("borderColor",GitHub.Color.hsb2hex(c));a.find(".labeli").css("borderColor",GitHub.Color.hsb2hex(c));a.find(".labeli .remove").css("borderLeftColor",
f);a.find(".labeli .remove").hover(function(){$(this).css("backgroundColor",GitHub.Color.hsb2hex(e))},function(){$(this).css("backgroundColor",GitHub.Color.rgb2hex(b))});a.find("span").css("color",f);a.find(".labeli .remove").css("color",f)}};
GitHub.Issues.Labels.Editor={chooser:function(){return $(".labels .list li .chooser")},isOpen:function(){return this.chooser().length>0},close:function(){this.chooser().remove()},currentId:function(){var a=this.chooser().parent().find(".label.dropdown").attr("rel");return a.match(/^label(\d+)$/)[1]},currentName:function(){return this.chooser().parent().find("> a").text()},apply:function(){var a=GitHub.Issues.selected(),d=this.currentId(),b=this.currentName();GitHub.Issues.addLabels(a,d,b);this.close()},
saveColor:function(){var a=this.currentId(),d=this.chooser().find(".colorpicker_hex input").val(),b=labels["label"+a]||"#ededed";b=b.replace(/#/g,"");if(d!=b){labels["label"+a]=d;GitHub.Issues.Labels.setLabelColors($("div[rel=label"+a+"]"),d);GitHub.Issues.Labels.setLabelColors($("div.label"+a),d);a=$("#new_label").attr("action")+"/"+a+"/set_color";b=GitHub.Issues.active?'<input type="hidden" name="issue" value="'+GitHub.Issues.active+'" />':"";var c=$('<form method="post" action="'+a+'" style="display:none">'+
b+'<input type="hidden" name="color" value="'+d+'" /></form>');$("#new_label").before(c);c.ajaxSubmit(function(){c.remove()})}},rename:function(){var a=this.chooser(),d=this.currentId(),b=$("#new_label").attr("action")+"/"+d+"/rename",c=a.find(".rename_label input[type=text]").val();$.post(b,"name="+c);a.parents("li").remove();GitHub.Issues.Labels.sortedLabelInsert(c,d);$(".display .label"+d+" span").text(c);$("#issues #action_list option[value="+d+"]").html("&nbsp;&nbsp;"+c);this.close()},remove:function(){if(confirm("Are you sure?")){var a=
this.currentId(),d=$("#new_label").attr("action")+"/"+a;$.post(d,"_method=delete");this.chooser().parents("li").remove();$(".display .label"+a).remove();$("#issues #action_list option[value="+a+"]").remove();this.close()}}};
GitHub.Color={hex2rgb:function(a){a=a.toLowerCase().replace(/#/,"");var d={};if(a.length==6){d.r=parseInt(a.substr(0,2),16);d.g=parseInt(a.substr(2,2),16);d.b=parseInt(a.substr(4,2),16)}else if(a.length==3){d.r=parseInt(a.substr(0,1)+a.substr(0,1),16);d.g=parseInt(a.substr(1,1)+a.substr(1,1),16);d.b=parseInt(a.substr(2,2)+a.substr(2,2),16)}return d},rgb2hsb:function(a){var d,b;a.r=parseFloat(a.r);a.g=parseFloat(a.g);a.b=parseFloat(a.b);var c=a.r>a.g?a.r:a.g;if(a.b>c)c=a.b;var e=a.r<a.g?a.r:a.g;if(a.b<
e)e=a.b;b=c/255;d=c!=0?(c-e)/c:0;if(d==0)a=0;else{var f=(c-a.r)/(c-e),g=(c-a.g)/(c-e);e=(c-a.b)/(c-e);a=a.r==c?e-g:a.g==c?2+f-e:4+g-f;a/=6;if(a<0)a+=1}return{h:Math.round(a*360),s:Math.round(d*100),b:Math.round(b*100)}},rgb2hex:function(a){return"rgb("+a.r+","+a.g+","+a.b+")"},hsb2hex:function(a){return this.rgb2hex(this.hsb2rgb(a))},hsb2rgb:function(a){var d={},b=Math.round(a.h),c=Math.round(a.s*255/100),e=Math.round(a.b*255/100);if(c==0)d.r=d.g=d.b=e;else{a=e;c=(255-c)*e/255;e=(a-c)*(b%60)/60;if(b==
360)b=0;if(b<60){d.r=a;d.b=c;d.g=c+e}else if(b<120){d.g=a;d.b=c;d.r=a-e}else if(b<180){d.g=a;d.r=c;d.b=c+e}else if(b<240){d.b=a;d.r=c;d.g=a-e}else if(b<300){d.b=a;d.g=c;d.r=c+e}else if(b<360){d.r=a;d.g=c;d.b=a-e}else{d.r=0;d.g=0;d.b=0}}return{r:Math.round(d.r),g:Math.round(d.g),b:Math.round(d.b)}}};
GitHub.Issues.Nav={currentHash:null,ignoreHashChange:false,interval:null,init:function(){this.currentHash=window.location.hash;this.interval=setInterval(this.checkHash,50)},setHash:function(a){this.ignoreHashChange=true;window.location.hash=a},checkHash:function(){var a=GitHub.Issues.Nav;if(window.location.hash!=a.currentHash)if(a.ignoreHashChange){a.ignoreHashChange=false;a.currentHash=window.location.hash}else{window.location.reload();clearInterval(a.interval)}}};
$(function(){if($("#issues").length!=0){function a(c,e){$(".loading").show();var f=$("#issue_list");e=e||function(g,h){return g[c]>h[c]?1:-1};e=GitHub.Issues.list.sort(e);$.each(e,function(){f.prepend(this.element())});$("#sort_by_"+c).parents("span").find("a").show().end().find("strong").hide();$("#sort_by_"+c).hide().next("strong").show();GitHub.Issues.targetFirst();$(".loading").hide();return false}GitHub.Issues.init();$.hotkeys({c:GitHub.Issues.createIssue,l:GitHub.Issues.createLabel,i:GitHub.Issues.backToInbox,
u:GitHub.Issues.backToIssues,I:GitHub.Issues.markSelectedAsRead,U:GitHub.Issues.markSelectedAsUnread,e:GitHub.Issues.closeSelected,y:GitHub.Issues.removeSelectedFromView,j:GitHub.Issues.moveTargetDown,k:GitHub.Issues.moveTargetUp,o:GitHub.Issues.showTarget,x:GitHub.Issues.toggleSelectTarget,"?":GitHub.Issues.showHotkeyHelp,"/":GitHub.Issues.focusIssuesSearch,enter:GitHub.Issues.showTarget});$("#issues a.internal").click(function(){var c=$(this).attr("href").match(/issue\/(\d+)/);GitHub.Issues.showIssue(c[1]);
GitHub.Issues.targetIssue(c[1]);return false});$(".issue.closed .meta").livequery("click",function(c){return GitHub.Issues.issueRowClickHandler(c)});$(".issue.closed .top.handle").livequery("click",function(c){return GitHub.Issues.issueRowClickHandler(c)});$(".goto_login").click(function(){window.location="/login?return_to="+window.location;return false});$(".create_issue").click(function(){GitHub.Issues.toggleCreateIssueForm();return false});$(".cancel_issue").click(function(){GitHub.Issues.hideCreateIssueForm();
return false});$(".issue .edit").live("click",function(){GitHub.Issues.showEditIssueForm();return false});$(".issue .edit_issue .cancels").live("click",function(){GitHub.Issues.hideEditIssueForm();return false});$(".new_issue_comment").submit(function(){if(GitHub.Issues.validateComment(this)){$(this).find(":button, :submit").attr("disabled",true);$(this).find(":button").spin();return true}else return false});$(".comment .edit_issue_comment").click(function(){GitHub.Issues.showEditCommentForm($(this).parents(".comment:first"));
return false});$(".comment .edit_issue_comment_form .cancels").click(function(){GitHub.Issues.hideEditCommentForm($(this).parents(".comment:first"));return false});$(".delete_issue_comment").click(function(){var c=$(this).parents(".comment:first");$.del(this.href,function(){c.remove()});return false});$(".save_comment_and_close_issue").click(function(){var c=$(this).parents("form");if(GitHub.Issues.validateComment(c)){$(this).spin();c.find(":button, :submit").attr("disabled",true);c.ajaxSubmit(function(){GitHub.Issues.closeIssue()});
return false}});$("#issues .back_link").click(function(){if($(this).find("a").attr("href")=="#"){GitHub.Issues.hideIssue();return false}else return true});$("#issues #action_list").change(function(){var c=$(this).val();if(c=="gh-actions"||c=="gh-labels"){$(this).val("gh-actions");return $(this).blur()}else if(c=="new_label"){$(this).val("gh-actions");$(".create_label").trigger("click");return $(this).blur()}var e=GitHub.Issues.selected();if(e.length==0){alert("Please select an issue first");$(this).val("gh-actions");
return $(this).blur()}var f=$(this).parent().find("option:selected").text();f=f.slice(2,f.length);var g=false;$.each(e,function(h,i){if(f=="Open")GitHub.Issues.openIssue(i);else if(f=="Close")GitHub.Issues.closeIssue(i);else if(f=="Mark as Read")GitHub.Issues.markAsRead(i);else if(f=="Mark as Unread")GitHub.Issues.markAsUnread(i);else g=true});g&&GitHub.Issues.addLabels(e,c,f);$(this).val("gh-actions");return $(this).blur()});$(".voting_box .act a").click(function(){var c=$(this).parents(".issue").attr("id").match(/\d+$/)[0];
c=GitHub.Issues.find(c);var e=$(this).hasClass("enabled");e?c.addVote():c.removeVote();return false});$(".comment_toggle").click(function(){var c=$(this).parents(".issue").attr("id").replace("issue_","");GitHub.Issues.showIssue(c);$(".comments:visible").scrollTo(500);return false});$("#issues .remove").livequery("click",function(){var c=$(this).parents("li").attr("id").replace("issue_",""),e=$(this).parents("div.label"),f=e.attr("id").match(/label_(\d+)/)[1];e.remove();$.post($("#new_label").attr("action")+
"/"+f+"/unappend",{issues:c})});$("#sort_by_priority").click(function(){GitHub.Issues.setListHash("list");GitHub.Issues.enableSortable();return a("priority",function(c,e){return c.priority<e.priority?1:-1})});$("#sort_by_votes").click(function(){GitHub.Issues.setListHash("sort=votes");GitHub.Issues.disableSortable();return a("votes",function(c,e){return c.votes()>e.votes()?1:-1})});$("#sort_by_updated").click(function(){GitHub.Issues.setListHash("sort=updated");GitHub.Issues.disableSortable();return a("updated")});
$("body").click(function(){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close()});$(".create_label").click(function(){$("#new_label .error").hide();$("#new_label").toggle().find("input[type=text]").focus();return false});$(".cancel_label").click(function(){$("#new_label").toggle();$("#new_label .error").hide();$("#new_label input[type=text]").val("").blur();return false});$("#new_label").submit(function(){var c=$(this).find("input[type=text]"),e=c.val();if(!e.match(/\S/)){c=$("#new_label .error");
c.text("Label can't be blank");c.show();return false}c.val("");GitHub.Issues.Labels.sortedLabelInsert(e);$.post($(this).attr("action"),{label:e},function(f){var g=$('<option value="'+f+'">&nbsp;&nbsp;'+e+"</option>");$("#issues #action_list").append(g);$(".labels .list li .label.dropdown[rel=]").attr("rel","label"+f)});$("#new_label").toggle();$("#new_label .error").hide();c.blur();return false});$(".labels .list .label.dropdown").livequery("click",function(c){if(GitHub.Issues.collab&&$(this).parent().find(".chooser").length==
0){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close();c.stopPropagation();var e=$(".labels .chooser").clone();e.click(function(g){g.stopPropagation()});c=$(this).attr("rel");var f=labels[c];if(f==null)f="#ededed";e.find(".label").addClass(c);e.find(".picker").ColorPicker({flat:true,color:f,onChange:function(g,h){GitHub.Issues.Labels.setLabelColors(e.find(".label"),h)}});e.prependTo($(this).parent()).show()}});$("#issues .labels .chooser .apply.action").livequery("click",function(){GitHub.Issues.Labels.Editor.apply();
return false});$("#issues .labels .color").livequery("click",function(){$("#issues .labels .list .change_color").show();return false});$("#issues .labels .change_color .cancel_color_change").livequery("click",function(){$("#issues .labels .list .change_color").hide();return false});$("#issues .labels .change_color form").livequery("submit",function(){GitHub.Issues.Labels.Editor.saveColor();GitHub.Issues.Labels.Editor.close();return false});$("#issues .labels .rename").livequery("click",function(){$("#issues .labels .list .rename_label").show().find("input[type=text]").focus();
return false});$("#issues .labels .list .rename_label .cancel_label_rename").livequery("click",function(){$("#issues .labels .list .rename_label").hide().find("input[type=text]").val("");return false});$("#issues .labels .list .rename_label").livequery("submit",function(){GitHub.Issues.Labels.Editor.rename();return false});$("#issues .labels .delete").livequery("click",function(){GitHub.Issues.Labels.Editor.remove();return false});$("#issues .select_all").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").attr("checked",
"checked").change();return false});$("#issues .select_none").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").removeAttr("checked").change();return false});$("#issues .list input[type=checkbox]").change(function(){$(this).attr("checked")?$(this).parents(".issue").addClass("selected"):$(this).parents(".issue").removeClass("selected")});var d=[],b=function(){$("#issues .display .list input[type=checkbox]").each(function(c,e){$(e).attr("rel","r-1-"+c)})};b();$("#issues .display .list input[type=checkbox]").click(function(c){var e=
$(this).attr("rel").match(/^r-(\d+)-(\d+)$/),f=parseInt(e[1]);e=parseInt(e[2]);if(c.shiftKey&&d.length>0){c=d[d.length-1];var g=c.match(/^r-(\d+)-(\d+)$/);c=parseInt(g[1]);g=parseInt(g[2]);if(f==c){c=$(this).attr("checked")==true;e=[e,g].sort();g=e[0];e=e[1];for(g=g;g<e;g++){var h=$("#issues .display .list input[rel=r-"+f+"-"+g+"]");if(c==true){h.attr("checked","true");h.parents("li").addClass("selected")}else{h.removeAttr("checked");h.parents("li").removeClass("selected")}}}}d.push($(this).attr("rel"))});
$("#issues .display .list a.select_all").click(function(){$(this).removeClass("select_all");var c=$(this).attr("class");$(this).addClass("select_all");$("#issues .display .list tr."+c+" input[type=checkbox]").attr("checked","true");d=[];return false});$("#issues .display .list a.select_none").click(function(){$(this).removeClass("select_none");var c=$(this).attr("class");$(this).addClass("select_none");$("#issues .display .list tr."+c+" input[type=checkbox]").removeAttr("checked");d=[];return false});
GitHub.Issues.collab&&$("#issues .display .list").sortable({axis:"y",containment:"#issues",handle:".drag.handle",cancel:".open, .voting_box",update:b,sort:GitHub.Issues.Dragger.sortDrag,start:GitHub.Issues.Dragger.startDrag,stop:GitHub.Issues.Dragger.stopDrag});$("#issues .list input[type=checkbox]").change();GitHub.Issues.active||$("#issues .issue:first").addClass("target")}});$(function(){$("#add_key_action").click(function(){$(this).toggle();$("#new_key_form_wrap").toggle().find(":text").focus();return false});$(".edit_key_action").live("click",function(){$.gitbox($(this).attr("href"));return false});$("#cancel_add_key").click(function(){$("#add_key_action").toggle();$("#new_key_form_wrap").toggle().find("textarea").val("");$("#new_key").find(":text").val("");$("#new_key .object_error").remove();return false});$(".cancel_edit_key").live("click",function(){$.facebox.close();
$("#new_key .object_error").remove();return false});$(".delete_key").live("click",function(){if(confirm("Are you sure you want to delete this key?")){$.ajax({type:"POST",data:{_method:"delete"},url:$(this).attr("href")});var a=$(this).parents("ul");$(this).parent().remove();a.find("li").length==0&&$("#no_keys_note").show()}return false});$(".key_editing").live("submit",function(){var a=this;$(a).find(".object_error").remove();$(a).find(":submit").attr("disabled",true).spin();$(a).ajaxSubmit(function(d){if(d.substring(0,
3)=="<li"){if($(a).attr("id").substring(0,4)=="edit"){$("#"+$(a).attr("id").substring(5)).replaceWith(d);$.facebox.close()}else{$("#no_keys_note").hide();$("ul.public_keys").append(d);$("#add_key_action").toggle();$("#new_key_form_wrap").toggle()}$(a).find("textarea").val("");$(a).find(":text").val("")}else $(a).append(d);$(a).find(":submit").attr("disabled",false).stopSpin()});return false})});function defineNetwork(a){function d(b,c,e){this.container=b;this.width=c;this.height=e;this.loaderInterval=null;this.loaderOffset=0;this.ctx=this.initCanvas(b,c,e);this.startLoader("Loading graph data");this.loadMeta()}d.prototype={initCanvas:function(b){b=a(b).find("canvas")[0];b.style.zIndex="0";return b.getContext("2d")},startLoader:function(b){this.ctx.save();this.ctx.font="14px Monaco, monospace";this.ctx.fillStyle="#99b2cc";this.ctx.textAlign="center";this.ctx.fillText(b,this.width/2,85);this.ctx.restore();
var c=this;this.loaderInterval=setInterval(function(){c.displayLoader()},75)},stopLoader:function(){clearInterval(this.loaderInterval)},displayLoader:function(){colors=["#36689a","#4a77a4","#5e86ae","#9cb4cd"];this.ctx.save();this.ctx.translate(this.width/2+0.5,50);this.ctx.clearRect(-16,-16,32,32);this.ctx.rotate(this.loaderOffset*(Math.PI/6));for(var b=0;b<12;b++){this.ctx.fillStyle=colors[b]||"#c4d2e1";this.ctx.beginPath();this.ctx.moveTo(-1.5,-8);this.ctx.lineTo(-1.5,-15);this.ctx.lineTo(0,-16);
this.ctx.lineTo(1.5,-15);this.ctx.lineTo(1.5,-8);this.ctx.lineTo(-1.5,-8);this.ctx.fill();this.ctx.rotate(-Math.PI/6)}this.ctx.restore();this.loaderOffset=(this.loaderOffset+1)%12},waitForCurrent:function(b){var c=this;c.current?b({current:true}):a(".js-network-poll").each(function(){var e=a(this).attr("rel");a.smartPoller(function(f){a.getJSON("/cache/network_current/"+e,function(g){if(g&&g.current){c.current=true;b(g)}else f()})})})},loadMeta:function(){var b=this;b.loaded=false;a.smartPoller(function(c){a.ajax({url:"network_meta",
dataType:"json",success:function(e){if(e&&e.nethash){b.loaded=true;b.init(e)}else b.waitForCurrent(function(){a(".js-network-poll").hide();a(".js-network-current").show();b.loaded||c()})},error:function(){c()}})})},init:function(b){this.focus=b.focus;this.nethash=b.nethash;this.spaceMap=b.spacemap;this.userBlocks=b.blocks;this.commits=[];for(var c=0;c<b.dates.length;c++)this.commits.push(new d.Commit(c,b.dates[c]));this.users={};for(c=0;c<b.users.length;c++){var e=b.users[c];this.users[e.name]=e}this.chrome=
new d.Chrome(this,this.ctx,this.width,this.height,this.focus,this.commits,this.userBlocks,this.users);this.graph=new d.Graph(this,this.ctx,this.width,this.height,this.focus,this.commits,this.users,this.spaceMap,this.userBlocks,this.nethash);this.mouseDriver=new d.MouseDriver(this.container,this.chrome,this.graph);this.keyDriver=new d.KeyDriver(this.container,this.chrome,this.graph);this.stopLoader();this.graph.drawBackground();this.chrome.draw();this.graph.requestInitialChunk()},initError:function(){this.stopLoader();
this.ctx.clearRect(0,0,this.width,this.height);this.startLoader("Graph could not be drawn due to a network IO problem.")}};d.Commit=function(b,c){this.time=b;this.date=Date.parseISO8601(c);this.populated=this.requested=null};d.Commit.prototype={populate:function(b,c,e){this.user=c;this.author=b.author;this.date=Date.parseISO8601(b.date);this.gravatar=b.gravatar;this.id=b.id;this.login=b.login;this.message=b.message;this.space=b.space;this.time=b.time;this.parents=this.populateParents(b.parents,e);
this.requested=true;this.populated=new Date},populateParents:function(b,c){for(var e=[],f=0;f<b.length;f++){var g=b[f],h=c[g[1]];h.id=g[0];h.space=g[2];e.push(h)}return e}};d.Chrome=function(b,c,e,f,g,h,i,l){this.namesWidth=100;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.userBgColors=["#EBEBFF","#E0E0FF"];this.network=b;this.ctx=c;this.width=e;this.height=f;this.commits=h;this.userBlocks=i;this.users=l;this.offsetX=this.namesWidth+(e-this.namesWidth)/
2-g*20;this.offsetY=0;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(e-this.namesWidth)/2;this.activeUser=null};d.Chrome.prototype={moveX:function(b){this.offsetX+=b;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-this.commits.length*20},moveY:function(b){this.offsetY+=b;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<
-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},calcContentHeight:function(){for(var b=0,c=0;c<this.userBlocks.length;c++){var e=this.userBlocks[c];b+=e.count}return b*20},hover:function(b,c){for(var e=0;e<this.userBlocks.length;e++){var f=this.userBlocks[e];if(b>0&&b<this.namesWidth)if(c>40+this.offsetY+f.start*20)if(c<40+this.offsetY+(f.start+f.count)*20)return this.users[f.name]}return null},draw:function(){this.drawTimeline(this.ctx);this.drawUsers(this.ctx);
this.drawFooter(this.ctx)},drawTimeline:function(b){b.fillStyle="#111111";b.fillRect(0,0,this.width,20);b.fillStyle="#333333";b.fillRect(0,20,this.width,20);var c=parseInt((0-this.offsetX)/20);if(c<0)c=0;var e=c+parseInt(this.width/20);if(e>this.commits.length)e=this.commits.length;b.save();b.translate(this.offsetX,0);b.font="10px Helvetica, sans-serif";var f=null,g=null;for(c=c;c<e;c++){var h=this.commits[c],i=this.months[h.date.getMonth()];if(i!=f){b.fillStyle="#ffffff";b.fillText(i,c*20-3,14);
f=i}h=parseInt(h.date.getDate());if(h!=g){b.fillStyle="#ffffff";b.fillText(h,c*20-3,33);g=h}}b.restore()},drawUsers:function(b){b.fillStyle="#FFFFFF";b.fillRect(0,0,this.namesWidth,this.height);b.save();b.translate(0,40+this.offsetY);for(var c=0;c<this.userBlocks.length;c++){var e=this.userBlocks[c];b.fillStyle=this.userBgColors[c%2];b.fillRect(0,e.start*20,this.namesWidth,e.count*20);if(this.activeUser&&this.activeUser.name==e.name){b.fillStyle="rgba(0, 0, 0, 0.05)";b.fillRect(0,e.start*20,this.namesWidth,
e.count*20)}b.fillStyle="#DDDDDD";b.fillRect(0,e.start*20,1,e.count*20);b.fillRect(this.namesWidth-1,e.start*20,1,e.count*20);b.fillRect(this.width-1,e.start*20,1,e.count*20);b.fillRect(0,(e.start+e.count)*20-1,this.namesWidth,1);b.measureText(e.name);var f=(e.start+e.count/2)*20+3;b.fillStyle="#000000";b.font="12px Monaco, monospace";b.textAlign="center";b.fillText(e.name,this.namesWidth/2,f,96)}b.restore();b.fillStyle="#111111";b.fillRect(0,0,this.namesWidth,20);b.fillStyle="#333333";b.fillRect(0,
20,this.namesWidth,20)},drawFooter:function(b){b.fillStyle="#F4F4F4";b.fillRect(0,this.height-20,this.width,20);b.fillStyle="#CCCCCC";b.fillRect(0,this.height-20,this.width,1);b.fillStyle="#000000";b.font="11px Monaco, monospace";b.fillText("GitHub Network Graph Viewer v4.0.0",5,this.height-5)}};d.Graph=function(b,c,e,f,g,h,i,l,j,o){this.namesWidth=100;this.spaceColors=[];this.bgColors=["#F5F5FF","#F0F0FF"];this.spaceColors.push("#FF0000");this.spaceColors.push("#0000FF");this.spaceColors.push("#00FF00");
this.spaceColors.push("#FF00FF");this.spaceColors.push("#E2EB00");this.spaceColors.push("#FFA600");this.spaceColors.push("#00FFFC");this.spaceColors.push("#DD458E");this.spaceColors.push("#AD7331");this.spaceColors.push("#97AD31");this.spaceColors.push("#51829D");this.spaceColors.push("#70387F");this.spaceColors.push("#740000");this.spaceColors.push("#745C00");this.spaceColors.push("#419411");this.spaceColors.push("#37BE8C");this.spaceColors.push("#6C5BBD");this.spaceColors.push("#F300AA");this.spaceColors.push("#586D41");
this.spaceColors.push("#3B4E31");this.network=b;this.ctx=c;this.width=e;this.height=f;this.focus=g;this.commits=h;this.users=i;this.spaceMap=l;this.userBlocks=j;this.nethash=o;this.offsetX=this.namesWidth+(e-this.namesWidth)/2-g*20;this.bgCycle=this.offsetY=0;this.marginMap={};this.gravatars={};this.activeCommit=null;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(e-this.namesWidth)/2;this.showRefs=true;this.lastHotLoadCenterIndex=null;this.connectionMap={};this.spaceUserMap=
{};for(b=0;b<j.length;b++){e=j[b];for(c=e.start;c<e.start+e.count;c++)this.spaceUserMap[c]=i[e.name]}this.headsMap={};for(b=0;b<j.length;b++){e=j[b];e=i[e.name];for(c=0;c<e.heads.length;c++){f=e.heads[c];this.headsMap[f.id]||(this.headsMap[f.id]=[]);g={name:e.name,head:f};this.headsMap[f.id].push(g)}}};d.Graph.prototype={moveX:function(b){this.offsetX+=b;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-
this.commits.length*20;this.hotLoadCommits()},moveY:function(b){this.offsetY+=b;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},toggleRefs:function(){this.showRefs=!this.showRefs},calcContentHeight:function(){for(var b=0,c=0;c<this.userBlocks.length;c++){var e=this.userBlocks[c];b+=e.count}return b*20},hover:function(b,c){for(var e=this.timeWindow(),f=e.min;f<=e.max;f++){var g=
this.commits[f],h=this.offsetX+g.time*20,i=this.offsetY+50+g.space*20;if(b>h-5&&b<h+5&&c>i-5&&c<i+5)return g}return null},hotLoadCommits:function(){var b=200,c=parseInt((-this.offsetX+this.graphMidpoint)/20);if(c<0)c=0;if(c>this.commits.length-1)c=this.commits.length-1;if(!(this.lastHotLoadCenterIndex&&Math.abs(this.lastHotLoadCenterIndex-c)<10)){this.lastHotLoadCenterIndex=c;var e=this.backSpan(c,b);c=this.frontSpan(c,b);if(e||c){b=e?e[0]:c[0];e=c?c[1]:e[1];this.requestChunk(b,e)}}},backSpan:function(b,
c){for(var e=null,f=b;f>=0&&f>b-c;f--)if(!this.commits[f].requested){e=f;break}if(e!=null){f=b=null;for(f=e;f>=0&&f>e-c;f--)if(this.commits[f].requested){b=f;break}if(b)f=b+1;else{f=e-c;if(f<0)f=0}return[f,e]}else return null},frontSpan:function(b,c){for(var e=null,f=b;f<this.commits.length&&f<b+c;f++)if(!this.commits[f].requested){e=f;break}if(e!=null){f=b=null;for(f=e;f<this.commits.length&&f<e+c;f++)if(this.commits[f].requested){b=f;break}f=b?b-1:e+c>=this.commits.length?this.commits.length-1:
e+c;return[e,f]}else return null},requestInitialChunk:function(){var b=this;a.getJSON("network_data_chunk?nethash="+this.nethash,function(c){b.importChunk(c);b.draw();b.network.chrome.draw()})},requestChunk:function(b,c){for(var e=b;e<=c;e++)this.commits[e].requested=new Date;var f=this;b="network_data_chunk?nethash="+this.nethash+"&start="+b+"&end="+c;a.getJSON(b,function(g){f.importChunk(g);f.draw();f.network.chrome.draw();f.lastHotLoadCenterIndex=this.focus})},importChunk:function(b){for(var c=
0;c<b.commits.length;c++){var e=b.commits[c],f=this.spaceUserMap[e.space],g=this.commits[e.time];g.populate(e,f,this.commits);for(e=0;e<g.parents.length;e++){f=g.parents[e];for(f=f.time+1;f<g.time;f++){this.connectionMap[f]=this.connectionMap[f]||[];this.connectionMap[f].push(g)}}}},timeWindow:function(){var b=parseInt((this.namesWidth-this.offsetX+20)/20);if(b<0)b=0;var c=b+parseInt((this.width-this.namesWidth)/20);if(c>this.commits.length-1)c=this.commits.length-1;return{min:b,max:c}},draw:function(){this.drawBackground();
var b=this.timeWindow(),c=b.min;b=b.max;this.ctx.save();this.ctx.translate(this.offsetX,this.offsetY+50);for(var e={},f=0;f<this.spaceMap.length;f++)for(var g=this.spaceMap.length-f-1,h=c;h<=b;h++){var i=this.commits[h];if(i.populated&&i.space==g){this.drawConnection(i);e[i.id]=true}}for(f=c;f<=b;f++)if(g=this.connectionMap[f])for(h=0;h<g.length;h++){i=g[h];if(!e[i.id]){this.drawConnection(i);e[i.id]=true}}for(f=0;f<this.spaceMap.length;f++){g=this.spaceMap.length-f-1;for(h=c;h<=b;h++){i=this.commits[h];
if(i.populated&&i.space==g)i==this.activeCommit?this.drawActiveCommit(i):this.drawCommit(i)}}if(this.showRefs)for(h=c;h<=b;h++){i=this.commits[h];if(i.populated)if(c=this.headsMap[i.id])for(f=e=0;f<c.length;f++){g=c[f];if(this.spaceUserMap[i.space].name==g.name){g=this.drawHead(i,g.head,e);e+=g}}}this.ctx.restore();this.activeCommit&&this.drawCommitInfo(this.activeCommit)},drawBackground:function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.save();this.ctx.translate(0,this.offsetY+50);
this.ctx.clearRect(0,-10,this.width,this.height);for(var b=0;b<this.userBlocks.length;b++){var c=this.userBlocks[b];this.ctx.fillStyle=this.bgColors[b%2];this.ctx.fillRect(0,c.start*20-10,this.width,c.count*20);this.ctx.fillStyle="#DDDDDD";this.ctx.fillRect(0,(c.start+c.count)*20-11,this.width,1)}this.ctx.restore()},drawCommit:function(b){var c=b.time*20,e=b.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(b.space);this.ctx.beginPath();this.ctx.arc(c,
e,4,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawActiveCommit:function(b){var c=b.time*20,e=b.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(b.space);this.ctx.beginPath();this.ctx.arc(c,e,6,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawCommitInfo:function(b){var c=this.splitLines(b.message,54),e=80+15*c.length,f=this.offsetX+b.time*20,g=50+this.offsetY+b.space*20,h=0,i=0;h=f<this.graphMidpoint?f+10:f-410;i=g<40+(this.height-
40)/2?g+10:g-e-10;this.ctx.save();this.ctx.translate(h,i);this.ctx.fillStyle="#FFFFFF";this.ctx.strokeStyle="#000000";this.ctx.lineWidth="2";this.ctx.beginPath();this.ctx.moveTo(0,5);this.ctx.quadraticCurveTo(0,0,5,0);this.ctx.lineTo(395,0);this.ctx.quadraticCurveTo(400,0,400,5);this.ctx.lineTo(400,e-5);this.ctx.quadraticCurveTo(400,e,395,e);this.ctx.lineTo(5,e);this.ctx.quadraticCurveTo(0,e,0,e-5);this.ctx.lineTo(0,5);this.ctx.fill();this.ctx.stroke();var l=this.gravatars[b.gravatar];if(l)this.drawGravatar(l,
10,10);else{var j=this;e=window.location.protocol;l=new Image;l.src=e=="http:"?"http://www.gravatar.com/avatar/"+b.gravatar+"?s=32&d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png":"https://secure.gravatar.com/avatar/"+b.gravatar+"?s=32&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png";l.onload=function(){if(j.activeCommit==b){j.drawGravatar(l,h+10,i+10);j.gravatars[b.gravatar]=l}}}this.ctx.fillStyle="#000000";this.ctx.font="bold 14px Helvetica, sans-serif";this.ctx.fillText(b.author,
55,32);this.ctx.fillStyle="#888888";this.ctx.font="12px Monaco, monospace";this.ctx.fillText(b.id,12,65);this.drawMessage(c,12,85);this.ctx.restore()},drawGravatar:function(b,c,e){this.ctx.strokeStyle="#AAAAAA";this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.strokeRect(c+0.5,e+0.5,35,35);this.ctx.drawImage(b,c+2,e+2)},drawMessage:function(b,c,e){this.ctx.font="12px Monaco, monospace";this.ctx.fillStyle="#000000";for(var f=0;f<b.length;f++){var g=b[f];this.ctx.fillText(g,c,e+f*15)}},splitLines:function(b,
c){b=b.split(" ");for(var e=[],f="",g=0;g<b.length;g++){var h=b[g];if(f.length+1+h.length<c)f=f==""?h:f+" "+h;else{e.push(f);f=h}}e.push(f);return e},drawHead:function(b,c,e){this.ctx.font="10.25px Monaco, monospace";this.ctx.save();var f=this.ctx.measureText(c.name).width;this.ctx.restore();var g=b.time*20;b=b.space*20+5+e;this.ctx.save();this.ctx.translate(g,b);this.ctx.fillStyle="rgba(0, 0, 0, 0.8)";this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(-4,10);this.ctx.quadraticCurveTo(-9,10,
-9,15);this.ctx.lineTo(-9,15+f);this.ctx.quadraticCurveTo(-9,15+f+5,-4,15+f+5);this.ctx.lineTo(4,15+f+5);this.ctx.quadraticCurveTo(9,15+f+5,9,15+f);this.ctx.lineTo(9,15);this.ctx.quadraticCurveTo(9,10,4,10);this.ctx.lineTo(0,0);this.ctx.fill();this.ctx.fillStyle="#FFFFFF";this.ctx.font="12px Monaco, monospace";this.ctx.textBaseline="middle";this.ctx.scale(0.85,0.85);this.ctx.rotate(Math.PI/2);this.ctx.fillText(c.name,17,-1);this.ctx.restore();return f+20},drawConnection:function(b){for(var c=0;c<
b.parents.length;c++){var e=b.parents[c];if(c==0)e.space==b.space?this.drawBasicConnection(e,b):this.drawBranchConnection(e,b);else this.drawMergeConnection(e,b)}},drawBasicConnection:function(b,c){var e=this.spaceColor(c.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();this.ctx.moveTo(b.time*20,c.space*20);this.ctx.lineTo(c.time*20,c.space*20);this.ctx.stroke()},drawBranchConnection:function(b,c){var e=this.spaceColor(c.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();
this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,c.space*20);this.ctx.lineTo(c.time*20-14,c.space*20);this.ctx.stroke();this.threeClockArrow(e,c.time*20,c.space*20)},drawMergeConnection:function(b,c){var e=this.spaceColor(b.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();if(b.space>c.space){this.ctx.moveTo(b.time*20,b.space*20);var f=this.safePath(b.time,c.time,b.space);if(f){this.ctx.lineTo(c.time*20-10,b.space*20);this.ctx.lineTo(c.time*20-10,c.space*20+15);
this.ctx.lineTo(c.time*20-7.7,c.space*20+9.5);this.ctx.stroke();this.oneClockArrow(e,c.time*20,c.space*20)}else{f=this.closestMargin(b.time,c.time,b.space,-1);if(b.space==c.space+1&&b.space==f+1){this.ctx.lineTo(b.time*20,f*20+10);this.ctx.lineTo(c.time*20-15,f*20+10);this.ctx.lineTo(c.time*20-9.5,f*20+7.7);this.ctx.stroke();this.twoClockArrow(e,c.time*20,f*20)}else if(b.time+1==c.time){f=this.closestMargin(b.time,c.time,c.space,0);this.ctx.lineTo(b.time*20,f*20+10);this.ctx.lineTo(c.time*20-15,f*
20+10);this.ctx.lineTo(c.time*20-15,c.space*20+10);this.ctx.lineTo(c.time*20-9.5,c.space*20+7.7);this.ctx.stroke();this.twoClockArrow(e,c.time*20,c.space*20)}else{this.ctx.lineTo(b.time*20+10,b.space*20-10);this.ctx.lineTo(b.time*20+10,f*20+10);this.ctx.lineTo(c.time*20-10,f*20+10);this.ctx.lineTo(c.time*20-10,c.space*20+15);this.ctx.lineTo(c.time*20-7.7,c.space*20+9.5);this.ctx.stroke();this.oneClockArrow(e,c.time*20,c.space*20)}this.addMargin(b.time,c.time,f)}}else{f=this.closestMargin(b.time,c.time,
c.space,-1);if(f<c.space){this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,f*20+10);this.ctx.lineTo(c.time*20-12.7,f*20+10);this.ctx.lineTo(c.time*20-12.7,c.space*20-10);this.ctx.lineTo(c.time*20-9.4,c.space*20-7.7);this.ctx.stroke();this.fourClockArrow(e,c.time*20,c.space*20)}else{this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,f*20+10);this.ctx.lineTo(c.time*20-12.7,f*20+10);this.ctx.lineTo(c.time*20-12.7,c.space*20+10);this.ctx.lineTo(c.time*20-9.4,c.space*20+7.7);
this.ctx.stroke();this.twoClockArrow(e,c.time*20,c.space*20)}this.addMargin(b.time,c.time,f)}},addMargin:function(b,c,e){e=e;this.marginMap[e]||(this.marginMap[e]=[]);this.marginMap[e].push([b,c])},oneClockArrow:function(b,c,e){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-6.3,e+13.1);this.ctx.lineTo(c-10.8,e+9.7);this.ctx.lineTo(c-2.6,e+3.5);this.ctx.fill()},twoClockArrow:function(b,c,e){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-12.4,e+6.6);this.ctx.lineTo(c-9.3,e+
10.6);this.ctx.lineTo(c-3.2,e+2.4);this.ctx.fill()},threeClockArrow:function(b,c,e){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-14,e-2.5);this.ctx.lineTo(c-14,e+2.5);this.ctx.lineTo(c-4,e);this.ctx.fill()},fourClockArrow:function(b,c,e){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-12.4,e-6.6);this.ctx.lineTo(c-9.3,e-10.6);this.ctx.lineTo(c-3.2,e-2.4);this.ctx.fill()},safePath:function(b,c,e){for(var f=0;f<this.spaceMap[e].length;f++){var g=this.spaceMap[e][f];if(this.timeInPath(b,
g))return g[1]==c}return false},closestMargin:function(b,c,e,f){var g=this.spaceMap.length;f=f;for(var h=false,i=false,l=false;!(i&&h);){if(e+f>=0&&this.safeMargin(b,c,e+f))return e+f;if(e+f<0)h=true;if(e+f>g)i=true;if(l==false&&f==0){f=-1;l=true}else f=f<0?-f-1:-f-2}return e>0?e-1:0},safeMargin:function(b,c,e){e=e;if(!this.marginMap[e])return true;e=this.marginMap[e];for(var f=0;f<e.length;f++){var g=e[f];if(this.pathsCollide([b,c],g))return false}return true},pathsCollide:function(b,c){return this.timeWithinPath(b[0],
c)||this.timeWithinPath(b[1],c)||this.timeWithinPath(c[0],b)||this.timeWithinPath(c[1],b)},timeInPath:function(b,c){return b>=c[0]&&b<=c[1]},timeWithinPath:function(b,c){return b>c[0]&&b<c[1]},spaceColor:function(b){return b==0?"#000000":this.spaceColors[b%this.spaceColors.length]}};d.MouseDriver=function(b,c,e){this.container=b;this.chrome=c;this.graph=e;this.dragging=false;this.lastPoint={x:0,y:0};this.pressedUser=this.pressedCommit=this.lastHoverUser=this.lastHoverCommit=null;b=a(b).eq(0);var f=
a("canvas",b)[0];f.style.cursor="move";var g=this;this.up=function(){g.dragging=false;if(g.pressedCommit&&g.graph.activeCommit==g.pressedCommit)window.open("/"+g.graph.activeCommit.user.name+"/"+g.graph.activeCommit.user.repo+"/commit/"+g.graph.activeCommit.id);else if(g.pressedUser&&g.chrome.activeUser==g.pressedUser)window.location="/"+g.chrome.activeUser.name+"/"+g.chrome.activeUser.repo+"/network";g.pressedCommit=null;g.pressedUser=null};this.down=function(){if(g.graph.activeCommit)g.pressedCommit=
g.graph.activeCommit;else if(g.chrome.activeUser)g.pressedUser=g.chrome.activeUser;else g.dragging=true};this.docmove=function(h){var i=h.pageX;h=h.pageY;if(g.dragging){g.graph.moveX(i-g.lastPoint.x);g.graph.moveY(h-g.lastPoint.y);g.graph.draw();g.chrome.moveX(i-g.lastPoint.x);g.chrome.moveY(h-g.lastPoint.y);g.chrome.draw()}g.lastPoint.x=i;g.lastPoint.y=h};this.move=function(h){var i=h.pageX,l=h.pageY;if(g.dragging){g.graph.moveX(i-g.lastPoint.x);g.graph.moveY(l-g.lastPoint.y);g.graph.draw();g.chrome.moveX(i-
g.lastPoint.x);g.chrome.moveY(l-g.lastPoint.y);g.chrome.draw()}else{var j=g.chrome.hover(i-h.target.offsetLeft,l-h.target.offsetTop);if(j!=g.lastHoverUser){f.style.cursor=j?"pointer":"move";g.chrome.activeUser=j;g.chrome.draw();g.lastHoverUser=j}else{h=g.graph.hover(i-h.target.offsetLeft,l-h.target.offsetTop);if(h!=g.lastHoverCommit){f.style.cursor=h?"pointer":"move";g.graph.activeCommit=h;g.graph.draw();g.chrome.draw();g.lastHoverCommit=h}}}g.lastPoint.x=i;g.lastPoint.y=l};this.out=function(){g.graph.activeCommit=
null;g.chrome.activeUser=null;g.graph.draw();g.chrome.draw();g.lastHoverCommit=null;g.lastHoverUser=null};a("body")[0].onmouseup=this.up;a("body")[0].onmousemove=this.docmove;f.onmousedown=this.down;f.onmousemove=this.move;f.onmouseout=this.out};d.KeyDriver=function(b,c,e){this.container=b;this.chrome=c;this.graph=e;this.dirty=false;this.moveBothX=function(g){this.graph.moveX(g);this.chrome.moveX(g);this.graph.activeCommit=null;this.dirty=true};this.moveBothY=function(g){this.graph.moveY(g);this.chrome.moveY(g);
this.graph.activeCommit=null;this.dirty=true};this.toggleRefs=function(){this.graph.toggleRefs();this.dirty=true};this.redraw=function(){if(this.dirty){this.graph.draw();this.chrome.draw()}this.dirty=false};var f=this;this.down=function(g){var h=false;if(g.shiftKey)switch(g.which){case 37:case 72:f.moveBothX(999999);h=true;break;case 38:case 75:f.moveBothY(999999);h=true;break;case 39:case 76:f.moveBothX(-999999);h=true;break;case 40:case 74:f.moveBothY(-999999);h=true;break}else switch(g.which){case 37:case 72:f.moveBothX(100);
h=true;break;case 38:case 75:f.moveBothY(20);h=true;break;case 39:case 76:f.moveBothX(-100);h=true;break;case 40:case 74:f.moveBothY(-20);h=true;break;case 84:f.toggleRefs();h=true;break}h&&f.redraw()};this.press=function(g){if(a.browser.mozilla||a.browser.opera)f.down({shiftKey:false,which:g.keyCode})};a(document).keydown(this.down);a(document).keypress(this.press)};return d}var Network=defineNetwork(window.jQuery);$(function(){$("#organization-transforming").redirector({url:"/organizations/transforming?user="+github_user,to:"/login"});$("#members_bucket .remove-user").click(function(){var a,d=$(this),b=d.parents("li:first").find(".login").text();b="Are you POSITIVE you want to remove "+b+" from your organization?";if(!confirm(b))return false;d.spin().remove();a=$("#spinner").addClass("remove");$.del(d.attr("href"),function(){a.parent().remove()});return false})});$(function(){if(!$("body").hasClass("page-account"))return false;var a=$("#add_email_action a"),d=$("#cancel_add_email"),b=$("#add_email_form_wrap"),c=$(".add-emails-form .error_box");a.click(function(){$(this).toggle();b.fadeIn(200).find(":text").focus();return false});d.click(function(){a.toggle();b.hide().find(":text").val("");c.hide();return false});$(".delete_email").live("click",function(){if($("ul.user_emails li.email").length==1){$.facebox("You must always have at least one email address.  If you want to delete this address, add a new one first.");
return false}$.post($(this).attr("href"),{email:$(this).prev().text()});$(this).parent().remove();return false});$(".delete_connection").live("click",function(){$.post($(this).attr("href"),{_method:"delete"});$(this).parent().remove();return false});$("ul.user_emails li.email").length>0&&$("#add_email_form").submit(function(){$("#add_email_form :submit").attr("disabled",true).spin();var e=this;$(this).ajaxSubmit(function(f){f?$("ul.user_emails").append(f):c.show();$("#add_email_form :submit").attr("disabled",
false).stopSpin();$(e).find(":text").val("").focus()});return false});$(".user_toggle").click(function(){var e={};e[this.name]=this.checked?"1":"0";e._method="put";$.post("/account",e);$("#notify_save").show();setTimeout("$('#notify_save').fadeOut()",1000)});$("dl.form.autosave").autosaveField();$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".js-preview-job-profile").click(function(){$.get("/preview",{text:$("#user_profile_bio").val()},function(e){$.facebox(e,
"job-profile-preview")});return false})});$(function(){if($(".page-billing, .page-account").length==0)return false;$(".js-edit-org-select-billing").click(function(){$("a[href=#billing_bucket]").click();return false});var a=$("table.upgrades");if(a.length==0)return false;a.find(".choose_plan").click(function(){var d=$(this).closest("tr").attr("data-name");$(".js-new-plan-name-val").val(d);$(".js-new-plan-name").text(d);d=="free"?$(".js-new-plan-card-on-file").hide():$(".js-new-plan-card-on-file").show()});$("#coupon_button").click(function(){$("#coupon_form").show();
$(this).hide();return false});$(".selected .choose_plan").click()});$(function(){if(!$("body").hasClass("page-compare"))return false;var a=null;$(".compare-range .commit-ref.to").click(function(){a="end";$.facebox({div:"#compare_chooser"});return false});$(".compare-range .commit-ref.from").click(function(){a="start";$.facebox({div:"#compare_chooser"});return false});function d(){var f=$("#facebox .ref-autocompleter"),g=$("#facebox button.choose-end");$("#facebox button.refresh");f.val(a=="start"?comparisonBase:comparisonHead);$("#facebox .mode-upper").text(e(a));
$("#facebox .mode-lower").text(a);a=="start"?g.show():g.hide()}function b(){var f=$("#facebox .ref-autocompleter");if(f.length!=0){var g=$("#facebox .commit-preview-holder"),h=$("#facebox button.refresh"),i=$(".compare-range").attr("url-base");d();h.click(function(){if(a=="start")comparisonBase=f.val();else comparisonHead=f.val();$(document).trigger("close.facebox");document.location=i+comparisonBase+"..."+comparisonHead;return false});f.click(function(){this.focus();this.select();return false});
var l=false,j=null,o=function(){l&&j.abort();l=true;j=$.get(g.attr("url_base")+f.val(),null,function(v){if(v.length>0){g.html(v);g.find(".relatize").relatizeDate();g.find("a").attr("target","_blank")}l=false})};o();var n=f.val(),p=null,s=function(){if(n!=f.val()||p==f.val())n=f.val();else{o();p=f.val()}};f.keyup(function(){n=this.value;setTimeout(s,1000)});f.click()}}$(document).bind("reveal.facebox",b);var c=window.location.hash.substr(1);if(/^diff-/.test(c)||/^L\d+/.test(c))$("li a[href='#files_bucket']").click();
function e(f){return f.charAt(0).toUpperCase()+f.slice(1)}});$(function(){if(!$("body").hasClass("page-notifications"))return false;$("table.notifications input[type=checkbox]").change(function(){$.post("/account/toggle_notification",{_method:"put",enable:this.checked?"true":"false",notification_action:this.value})});$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".user_toggle").click(function(){var a=this.checked,d={};d[this.name]=this.checked?"1":"0";d._method="put";$.post("/account",d,function(){a?$("#notifications_global_wrapper").removeClass("ignored"):
$("#notifications_global_wrapper").addClass("ignored")})})});$(function(){if(!$("body").hasClass("page-profile"))return false;var a=$("ul.repositories>li"),d=$(".repo-filter input").enhancedField().val(""),b=d.val();function c(){a.show();d.val()!=""&&a.filter(":not(:Contains('"+d.val()+"'))").hide()}d.bind("keyup blur click",function(){if(this.value!=b){b=this.value;c()}});$("ul.repositories>li.simple").each(function(){var f=$(this),g=f.find("p.description").html();$.trim(g)!=""&&f.find("h3").attr("title",g).tipsy({gravity:"w"})});var e=$("ul#placeholder-members li").remove();
e.length>0&&$("ul.org-members").prepend(e)});$(function(){if(!$("body").hasClass("page-pullrequest"))return false;$("#reply-to-pr").click(function(){$("#comment_body").focus()});$(".new-comments .comment").editableComment()});$(function(){var a=false;$(".ajax_paginate a").live("click",function(){if(a)return false;a=true;var d=$(this).parent();$(this).html('<img src="/images/modules/ajax/indicator.gif"/>');$.get(this.href,function(b){d.replaceWith(b);$(".relatize").relatizeDate();a=false});return false})});$(function(){$(".graph .bars").each(function(){var a=this;if($(a).is(":visible")){var d=function(c){new ParticipationGraph(a,c)},b=$(this).attr("rel");$.get(b,null,d,"text")}})});ParticipationGraph=function(a,d){this.BAR_WIDTH=7;this.ownerCommits=this.allCommits=null;this.primer=new Primer(a,416,20);this.data=d;this.readData();this.draw()};
ParticipationGraph.prototype={readData:function(){var a=this.data.split("\n");this.allCommits=a[0]?this.base64BytesToIntArray(a[0]):"";this.ownerCommits=a[1]?this.base64BytesToIntArray(a[1]):""},max:function(a){for(var d=a[0],b=1;b<a.length;b++)if(a[b]>d)d=a[b];return d},integerize:function(a){for(var d=[],b=0;b<a.length;b++)d.push(parseInt(a[b]));return d},base64ByteToInt:function(a){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!-";return d.indexOf(a)},base64BytesToIntArray:function(a){for(var d=
[],b,c=0;c<a.length;c++)if(c%2==0)b=64*this.base64ByteToInt(a.charAt(c));else{b+=this.base64ByteToInt(a.charAt(c));d.push(b)}return d},draw:function(){var a=this.max(this.allCommits);a=a>=20?19/a:1;var d=new Primer.Layer;d.bind(this.primer);for(var b=0;b<this.allCommits.length;b++){var c=new Primer.Layer;c.bind(this.primer);c.setFillStyle("#CACACA");var e=this.allCommits[b]*a;c.fillRect(b*(this.BAR_WIDTH+1),20-e,this.BAR_WIDTH,e);d.addChild(c)}var f=new Primer.Layer;f.bind(this.primer);for(b=0;b<
this.ownerCommits.length;b++){c=new Primer.Layer;c.bind(this.primer);c.setFillStyle("#336699");e=this.ownerCommits[b]*a;c.fillRect(b*(this.BAR_WIDTH+1),20-e,this.BAR_WIDTH,e);f.addChild(c)}this.primer.addChild(d);this.primer.addChild(f)}};$(function(){var a=$("table.upgrades");if(a.length==0)return false;a.find("tr.current");var d=$("#plan"),b=$("#credit_card_fields");function c(e){newPlan=e;a.find("tr.selected").removeClass("selected");e.addClass("selected");a.addClass("selected");d.val(newPlan.attr("data-name"));newPlan.attr("data-cost")==0?b.hide():b.show()}a.find(".choose_plan").click(function(){c($(this).closest("tr"));return false});$(".selected .choose_plan").click()});GitHub.PRDash={showingClosed:false,showingOpen:true,showingRead:true,activeSort:["created","desc"],errored:false,listings:$(),openListings:$(),closedListings:$(),unreadListings:$(),filteredListings:$(),listingsElement:null,noneShownElement:null,errorElement:null,loaderElement:null,titleElement:null,footerElement:null,sortElements:null,textFilterElement:null,init:function(){var a=this;this.listingsElement=$(".browser .listings");this.noneShownElement=$(".browser .none");this.errorElement=$(".browser .error");
this.loaderElement=$(".browser .context-loader");this.titleElement=$(".browser-title h2");this.footerElement=$(".browser .footerbar-text");this.textFilterElement=$(".browser input.textfilter");var d=$(".browser ul.filters li");d.each(function(){var c=$(this);switch(c.attr("data-filter")){case "open":a.showingOpen&&c.addClass("selected");c.click(function(){c.toggleClass("selected");a.showOpen(c.hasClass("selected"))});break;case "closed":a.showingClosed&&c.addClass("selected");c.click(function(){c.toggleClass("selected");
a.showClosed(c.hasClass("selected"))});break;case "read":a.showingRead&&c.addClass("selected");c.click(function(){c.toggleClass("selected");a.showRead(c.hasClass("selected"))});break}});this.sortElements=$(".browser ul.sorts li");var b=null;this.sortElements.each(function(){var c=$(this);if(c.attr("data-sort")==a.activeSort[0])b=c.addClass(a.activeSort[1]);c.click(function(){var e=$(this);b&&b.attr("data-sort")!=e.attr("data-sort")&&b.removeClass("asc").removeClass("desc");if(e.hasClass("desc")){a.sortBy(e.attr("data-sort"),
"asc");e.removeClass("desc").addClass("asc")}else{a.sortBy(e.attr("data-sort"),"desc");e.removeClass("asc").addClass("desc")}b=e})});this.textFilterElement.bind("keyup blur click",function(){a.filterBy(this.value)})},getPulls:function(a){var d=this;this.startLoading();$.ajax({url:a,success:function(b){d.errored=false;d.cancelLoading();d.render(b)},error:function(){d.errored=true;d.showError()}})},startLoading:function(){this.listingsElement.fadeTo(200,0.5);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,
0.5);this.loaderElement.show()},cancelLoading:function(){this.listingsElement.fadeTo(200,1);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,1);this.loaderElement.hide()},showError:function(){this.cancelLoading();this.listings&&this.listings.hide();this.noneShownElement.hide();this.errorElement.show()},render:function(a){this.textFilterElement.val("");this.listingsElement.html(a);this.listings=this.listingsElement.find(".listing");this.listings.find(".relatize").relatizeDate();
this.listings.each(function(){var d=$(this),b=Date.parse(d.find(".meta .relatize").attr("title"));b=(Date.now()-b)/1000/60/60/24;b<=7&&d.addClass("new");b>=21&&d.addClass("stale")});this.closedListings=this.listings.filter("[data-state=closed]");this.openListings=this.listings.filter("[data-state=open]");this.readListings=this.listings.filter("[data-read=1]");this.setCounts(this.openListings.length,this.closedListings.length);this.sortBy(this.activeSort[0],this.activeSort[1]);this.update()},setCounts:function(a,
d){function b(e){return e==1?"request":"requests"}var c=a+" open "+b(a);a=a+" open "+b(a)+" and "+d+" closed "+b(d);this.titleElement.text(c);this.footerElement.text(a)},showOpen:function(a){this.showingOpen=a?true:false;this.update()},showRead:function(a){this.showingRead=a?true:false;this.update()},showClosed:function(a){this.showingClosed=a?true:false;this.update()},filterBy:function(a){this.filteredListings=$();if(a!=null&&a!="")this.filteredListings=this.listings.filter(":not([data-filter*='"+
a.toLowerCase()+"'])");this.update()},sortBy:function(a,d){var b=this.listings.get().sort(function(c,e){c=c.getAttribute("data-"+a);e=e.getAttribute("data-"+a);return d=="asc"?c<e?-1:c>e?1:0:c<e?1:c>e?-1:0});this.listingsElement.html(b);this.activeSort=[a,d]},update:function(){if(this.listings!=null){this.listings.show();this.showingClosed||this.closedListings.hide();this.showingOpen||this.openListings.hide();this.showingRead||this.readListings.hide();this.filteredListings.hide();var a=this.listings.find(":visible").length;
a==0?this.noneShownElement.show():this.noneShownElement.hide()}}};
$(function(){GitHub.PRDash.init();var a=null;$("ul.bignav a, ul.smallnav a").click(function(){var g=$(this);if(a&&g.attr("href")==a.attr("href")&&!GitHub.PRDash.errored)return false;GitHub.PRDash.getPulls(g.attr("href"));a&&a.removeClass("selected");a=$(this).addClass("selected");return false});$("ul.bignav a.selected, ul.smallnav a.selected").click();var d=$(".browser .filterbox input"),b=$("ul.smallnav"),c=b.find("li");function e(){c.show();d.val()!=""&&c.filter(":not(:Contains('"+d.val()+"'))").hide()}
var f=d.val();d.bind("keyup blur click",function(){if(this.value!=f){f=this.value;e()}})});$(function(){$(".plan").dblclick(function(){var a=$(this).find("a.classy");if(a.length>0)document.location=a.attr("href")});$("#signup_form").submit(function(){$("#signup_button").attr("disabled",true).find("span").text("Creating your GitHub account...")});$("dl.form.autocheck").each(function(){var a=$(this);a.find("input").blur(function(){var d=$(this);if($.trim(d.val())){d.css("background-image",'url("/images/modules/ajax/indicator.gif")');$.ajax({url:d.attr("check-url"),data:{value:d.val()},success:function(){d.next().is(".note")&&
d.next().find("strong").text(d.val());a.unErrorify();d.css("background-image",'url("/images/modules/ajax/success.png")')},error:function(b){a.errorify(b.responseText);d.css("background-image",'url("/images/modules/ajax/error.png")')}})}})})});GitHub.spy=function(a){var d={path:"/",expires:1};a=a.repo;if(a!=""){$.cookie("spy_repo",a,d);$.cookie("spy_repo_at",new Date,d)}};GitHub.Team=function(a){this.url=window.location.pathname;this.orgUrl=this.url.split(/\/(teams|invite)/)[0];if(a)this.url=this.orgUrl+"/teams/"+a};
GitHub.Team.prototype={name:function(){return $("#team-name").val()},newRecord:function(){return!/\/invite/.test(location.pathname)&&!/\d/.test(location.pathname)},addMember:function(a){return/\//.test(a)?this.addRepo(a):this.addUser(a)},repos:function(){return $.makeArray($(".repositories li:visible a span").map(function(){return $(this).text()}))},addRepo:function(a){debug("Adding repo %s",a);if(!a||$.inArray(a,this.repos())>-1)return false;this.addRepoAjax(a);var d=$(".repositories").find("li:first").clone(),
b=d.find("input[type=hidden]");d.find("a").attr("href","/"+a).text(a);d.find(".remove-repository").attr("data-repo",a);GitHub.Autocomplete.visibilities[a]=="private"&&d.addClass("private");b.length>0&&b.val(a).attr("disabled",false);$(".repositories").append(d.show());return true},addRepoAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/repo/"+a)}},removeRepo:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.repos())==-1)return false;var d=$(".repositories li:visible a").filter(function(){return $(this).find("span").text()==
a});function b(){d.parents("li:first").remove()}function c(){d.parent().find(".spinner").after('<img class="dingus" src="/images/modules/ajax/error.png">').hide()}if(this.newRecord())b();else{d.parent().find(".remove-repository").after('<img class="dingus spinner" src="/images/modules/ajax/indicator.gif"/>').remove();this.removeRepoAjax(a,b,c)}return true},removeRepoAjax:function(a,d,b){if(!this.newRecord()){debug("Ajaxily removing %s",a);$.del(this.url+"/repo/"+a,{},{success:d,error:b})}},users:function(){return $.makeArray($(".usernames li:visible").map(function(){return $(this).find("a:first").text()}))},
addUser:function(a){debug("Adding %s",a);if(!a||$.inArray(a,this.users())>-1)return false;this.addUserAjax(a);var d=$(".usernames").find("li:first").clone(),b=GitHub.Autocomplete.gravatars[a],c=d.find("input[type=hidden]");b&&d.find("img").replaceWith(b);d.find("a").attr("href","/"+a).text(a);c.length>0&&c.val(a).attr("disabled",false);$(".usernames").append(d.show());return true},removeUser:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.users())==-1)return false;var d=$(".usernames li:visible a:contains("+
a+")");function b(){d.parents("li:first").remove()}if(this.newRecord())b();else{d.parent().find(".remove-user").spin().remove();$("#spinner").addClass("remove");this.removeUserAjax(a,b)}return true},addUserAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/member/"+a)}},removeUserAjax:function(a,d){if(!this.newRecord()){debug("Ajaxily removing %s",a);$.del(this.url+"/member/"+a,d)}}};
$(function(){if(GitHub.currentTeam){var a=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())},d=GitHub.currentTeam,b=new GitHub.Autocomplete;b.settings.selectFirst=true;b.reposURL=d.orgUrl+"/autocomplete/repos";b.repos($(".add-repository-form input")).result(a);$(".remove-repository").live("click",function(){d.removeRepo($(this).attr("data-repo"));return false});$(".add-username-form input").userAutocomplete().result(a);$(".remove-user").live("click",
function(){d.removeUser($(this).prev().text());return false});$(".add-username-form button, .add-repository-form button").click(function(){var c=$(this).parent();c=c.find(":text");var e=c.val();debug("Trying to add %s...",e);if(!e||!c.data("completed"))return false;c.val("").removeClass("ac-accept");d.addMember(e);return false});$(".add-username-form :text, .add-repository-form :text").keypress(function(c){if(c.keyCode==$.keys.enter){$(this).next("button").click();return false}if(c.keyCode!=$.keys.tab){debug("Clearing data.completed (was %s)",
$(this).data("completed")||"null");$(this).data("completed",null)}})}});$(function(){$(".remove-team").click(function(){if(!confirm("Are you POSITIVE you want to remove this team?"))return false;var a=$(this).parents("li.team");$.del(this.href,function(){a.remove()});$(this).spin().remove();return false})});GitHub.CachedCommitDataPoller=function(){$.smartPoller(2000,function(a){var d,b,c,e="/"+GitHub.nameWithOwner+"/commit/",f="/"+GitHub.nameWithOwner+"/cache/commits/"+GitHub.currentTreeSHA+"?path="+encodeURIComponent(GitHub.currentPath)+"&commit_sha="+GitHub.commitSHA;$.getJSON(f,function(g){if(g.nothing)return a();$("#browser tr").each(function(){if((d=$(this).find(".content a").attr("id"))&&g[d]){$(this).find(".age").html('<span class="drelatize">'+g[d].date+"</span>");b=$(this).find(".message");
b.html(g[d].message);b.html().length>50&&b.html(b.html().slice(0,47)+"...");b.html('<a href="'+e+g[d].commit+'" class="message">'+b.html()+"</a>");c=g[d].login?'<a href="/'+g[d].login+'">'+g[d].login+"</a>":g[d].author;b.html(b.html()+" ["+c+"]")}});$.fn.relatizeDate&&$(".drelatize").relatizeDate()})})};
$(function(){$("#readme").length>0?$("#read_more").show():$("#missing-readme").show();$("#download_button").click(function(){$.gitbox($(this).attr("href"));return false});$(".archive_link a").live("click",function(){$(".popup .inner").hide();$(".popup .wait").show();var e=$(this).attr("rel"),f=0;$.smartPoller(function(g){$.getJSON(e,function(h){if(f>60)return false;else if(h.ready)$(document).trigger("close.facebox");else{f+=1;g()}})})});$(".other_archive_link").live("click",function(){$.gitbox($(this).attr("href"));
return false});$("#loading_commit_data").length>0&&GitHub.CachedCommitDataPoller();if(GitHub&&GitHub.currentRef&&GitHub.commitSHA!=GitHub.currentRef){var a,d,b=GitHub.currentPath?GitHub.currentPath+"/":"",c="/"+GitHub.nameWithOwner;$("#browser .content a").each(function(){if(!/skiptree/.test(this.className)){d=$(this).text();if(/\/blob\//.test(this.href))a="/blob/";else{a="/tree/";d=d.substring(0,d.length-1)}d=encodeURIComponent(d);if(a=="/tree/")d+="/";this.href=c+a+GitHub.currentRef+"/"+encodeURI(b)+
d}})}});$(function(){GitHub.UFO={drawFont:function(){var a=document.getElementById("ufo");a=a.getContext("2d");for(var d=0;d<glifs.length;d++){a.save();var b=d%9*100,c=Math.floor(d/9)*100;a.translate(b+10,c+80);a.scale(0.1,-0.1);b=new GitHub.UFO.Glif(a,glifs[d]);b.draw();a.restore()}}};GitHub.UFO.Glif=function(a,d){this.ctx=a;this.contours=d};GitHub.UFO.Glif.prototype={draw:function(){this.ctx.beginPath();for(var a=0;a<this.contours.length;a++)this.drawContour(this.contours[a]);this.ctx.fillStyle="black";
this.ctx.fill()},drawContour:function(a){for(var d=0;d<a.length;d++)d==0?this.moveVertex(a[d]):this.drawVertex(a[d]);this.drawVertex(a[0])},moveVertex:function(a){this.ctx.moveTo(a[0],a[1])},drawVertex:function(a){if(a.length==2)this.ctx.lineTo(a[0],a[1]);else if(a.length==4)this.ctx.quadraticCurveTo(a[2],a[3],a[0],a[1]);else a.length==6&&this.ctx.bezierCurveTo(a[2],a[3],a[4],a[5],a[0],a[1])}};$("#ufo").length>0&&GitHub.UFO.drawFont();$(".glif_diff").each(function(){var a=$(this).attr("rel"),d=this.getContext("2d");
a=eval("glif_"+a);a=new GitHub.UFO.Glif(d,a);d.translate(0,240);d.scale(0.333,-0.333);a.draw()})});$(function(){$("a.follow").click(function(){$.post(this.href,{});$(this).parent().find(".follow").toggle();return false});$("#inline_visible_repos").click(function(){var a=$(this).spin(),d=window.location+"/ajax_public_repos";$(".projects").load(d,function(){a.stopSpin();$(".relatize").relatizeDate()});a.hide();return false});GitHub.editableGenerator&&$("#dashboard span.edit").each(GitHub.editableGenerator({width:"200px",submittype:"put"}));$("#edit_user .info .rename").click(function(){$("#edit_user .username").toggle();
$("#user_rename").toggle();return false});$("#user_rename > input[type=submit]").click(function(){if(!confirm(GitHub.rename_confirmation()))return false});$("#reveal_cancel_info").click(function(){$(this).toggle();$("#cancel_info").toggle();return false});$("#cancel_plan").submit(function(){var a="Are you POSITIVE you want to delete this account? There is absolutely NO going back. All repositories, comments, wiki pages - everything will be gone. Please consider downgrading the account's plan.";return confirm(a)});
window.location.href.match(/account\/upgrade$/)&&$("#change_plan_toggle").click()});$(function(){$("#see-more-elsewhere").click(function(){$(".seen-elsewhere").show();$(this).remove();return false});var a=[];$("form#history input[type=submit]").attr("disabled",true);$("form#history input[type=checkbox]").change(function(){var d=$(this).val(),b=$.inArray(d,a);if(b>-1)a.splice(b,1);else{a.push(d);if(a.length>2){d=a.shift();$("input[value="+d+"]").attr("checked",false)}}$("form#history tr.commit").removeClass("selected");$("form#history input[type=submit]").attr("disabled",true);if(a.length==
2){$("form#history input[type=submit]").attr("disabled",false);var c=false;$("form#history tr.commit").each(function(){c&&$(this).addClass("selected");if($(this).find("input:checked").length>0)c=!c;c&&$(this).addClass("selected")})}})});
